<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Jenkins on HoCode</title>
        <link>https://hollisho.github.io/tags/jenkins/</link>
        <description>Recent content in Jenkins on HoCode</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Hollis Ho</copyright>
        <lastBuildDate>Tue, 15 Jul 2025 00:17:11 +0800</lastBuildDate><atom:link href="https://hollisho.github.io/tags/jenkins/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>ä½¿ç”¨ Jenkins å’Œ Docker éƒ¨ç½² Webman é¡¹ç›®</title>
        <link>https://hollisho.github.io/p/%E4%BD%BF%E7%94%A8-jenkins-%E5%92%8C-docker-%E9%83%A8%E7%BD%B2-webman-%E9%A1%B9%E7%9B%AE/</link>
        <pubDate>Tue, 15 Jul 2025 00:17:11 +0800</pubDate>
        
        <guid>https://hollisho.github.io/p/%E4%BD%BF%E7%94%A8-jenkins-%E5%92%8C-docker-%E9%83%A8%E7%BD%B2-webman-%E9%A1%B9%E7%9B%AE/</guid>
        <description>&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°è¿è¡Œä¸­çš„å®¹å™¨ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨ Jenkins åšæŒç»­é›†æˆçš„åœºæ™¯é‡Œã€‚æœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•é€šè¿‡ Jenkins è„šæœ¬ï¼Œå°† Webman é¡¹ç›®éƒ¨ç½²åˆ°ä¸€ä¸ªåŸºäº Alpine çš„ Docker å®¹å™¨ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-èƒŒæ™¯&#34;&gt;ğŸš€ èƒŒæ™¯
&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨ Webman æ¡†æ¶å¼€å‘çš„ PHP é¡¹ç›®ï¼Œéƒ¨ç½²åœ¨åä¸º &lt;code&gt;webman-admin-php82&lt;/code&gt; çš„å®¹å™¨ä¸­ã€‚ä»£ç æ‰˜ç®¡åœ¨ Gitea ä¸­ï¼ŒJenkins é€šè¿‡ SSH æ‹‰å–ä»£ç å¹¶éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-æ‹‰å–ä»£ç &#34;&gt;ğŸ§© æ‹‰å–ä»£ç 
&lt;/h2&gt;&lt;h3 id=&#34;æ–¹å¼ä¸€ä½¿ç”¨-gitea-ç”¨æˆ·å--å¯†ç --tokenæ¨è&#34;&gt;æ–¹å¼ä¸€ï¼šä½¿ç”¨ Gitea ç”¨æˆ·å + å¯†ç  / Tokenï¼ˆæ¨èï¼‰
&lt;/h3&gt;&lt;p&gt;æœ€ç®€å•ç¨³å®šçš„æ–¹å¼ï¼Œé€‚ç”¨äº HTTP/HTTPS ä»“åº“åœ°å€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ­¥éª¤-1ç”Ÿæˆ-gitea-è®¿é—®-token&#34;&gt;æ­¥éª¤ 1ï¼šç”Ÿæˆ Gitea è®¿é—® Token
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;ç™»å½• Gitea&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ &lt;strong&gt;Settings&lt;/strong&gt;ï¼ˆè®¾ç½®ï¼‰&lt;/li&gt;
&lt;li&gt;å·¦ä¾§èœå•é€‰æ‹©ï¼š&lt;strong&gt;Applications&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ç‚¹å‡» &lt;strong&gt;Generate Token&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;è¾“å…¥åç§°ï¼Œå¦‚ï¼š&lt;code&gt;jenkins-ci&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆåï¼Œå¤åˆ¶ Tokenï¼Œä¿å­˜å¥½ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ­¥éª¤-2åœ¨-jenkins-ä¸­æ·»åŠ -gitea-å‡­æ®&#34;&gt;æ­¥éª¤ 2ï¼šåœ¨ Jenkins ä¸­æ·»åŠ  Gitea å‡­æ®
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;æ‰“å¼€ Jenkins â†’ &lt;strong&gt;Manage Jenkins&lt;/strong&gt; â†’ &lt;strong&gt;Credentials&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ° &lt;strong&gt;(global)&lt;/strong&gt; â†’ ç‚¹å‡» &lt;strong&gt;Add Credentials&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ç±»å‹é€‰æ‹©ï¼š&lt;strong&gt;Username with password&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é…ç½®å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Username&lt;/strong&gt;ï¼šä½ åœ¨ Gitea çš„ç”¨æˆ·å&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Password&lt;/strong&gt;ï¼šåˆšæ‰ç”Ÿæˆçš„ Token&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ID/Description&lt;/strong&gt;ï¼šæ¯”å¦‚ &lt;code&gt;gitea-token&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¿å­˜&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ­¥éª¤-3åœ¨-jenkins-job-ä¸­ä½¿ç”¨-gitea-å‡­æ®&#34;&gt;æ­¥éª¤ 3ï¼šåœ¨ Jenkins Job ä¸­ä½¿ç”¨ Gitea å‡­æ®
&lt;/h4&gt;&lt;p&gt;å¦‚æœæ˜¯ Freestyle Jobï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æºç ç®¡ç† â†’ Git Repository&lt;/li&gt;
&lt;li&gt;Repository URL: &lt;code&gt;http://your-gitea-host:3000/youruser/yourrepo.git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Credentials: é€‰æ‹©åˆšåˆšæ·»åŠ çš„ &lt;code&gt;gitea-token&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ–¹å¼äºŒä½¿ç”¨-ssh-å¯†é’¥å¯¹é€‚ç”¨äº-git-over-ssh&#34;&gt;æ–¹å¼äºŒï¼šä½¿ç”¨ SSH å¯†é’¥å¯¹ï¼ˆé€‚ç”¨äº Git over SSHï¼‰
&lt;/h3&gt;&lt;p&gt;é€‚åˆé«˜å®‰å…¨æ€§æˆ–ä½ åå¥½ SSH çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ­¥éª¤-1åœ¨-jenkins-ç”Ÿæˆ-ssh-å…¬ç§é’¥å¯¹&#34;&gt;æ­¥éª¤ 1ï¼šåœ¨ Jenkins ç”Ÿæˆ SSH å…¬ç§é’¥å¯¹
&lt;/h4&gt;&lt;p&gt;åœ¨ Jenkins å®¹å™¨æˆ–å®¿ä¸»æœºæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ssh-keygen -t rsa -b &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; -C &lt;span class=&#34;s2&#34;&gt;&amp;#34;jenkins@gitea&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¿å­˜ä¸º &lt;code&gt;/var/jenkins_home/.ssh/id_rsa&lt;/code&gt;ï¼ˆæˆ–ä½ è‡ªå®šä¹‰è·¯å¾„ï¼‰&lt;/p&gt;
&lt;h4 id=&#34;æ­¥éª¤-2å°†å…¬é’¥æ·»åŠ åˆ°-gitea-ç”¨æˆ·çš„-ssh-key&#34;&gt;æ­¥éª¤ 2ï¼šå°†å…¬é’¥æ·»åŠ åˆ° Gitea ç”¨æˆ·çš„ SSH Key
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;ç™»å½• Gitea&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»å¤´åƒ â†’ &lt;strong&gt;Settings&lt;/strong&gt; â†’ &lt;strong&gt;SSH Keys&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æ·»åŠ æ–° Keyï¼Œç²˜è´´ Jenkins çš„ &lt;code&gt;id_rsa.pub&lt;/code&gt; å†…å®¹&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ­¥éª¤-3åœ¨-jenkins-æ·»åŠ -ssh-å‡­æ®&#34;&gt;æ­¥éª¤ 3ï¼šåœ¨ Jenkins æ·»åŠ  SSH å‡­æ®
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;Jenkins â†’ &lt;strong&gt;Manage Jenkins&lt;/strong&gt; â†’ &lt;strong&gt;Credentials&lt;/strong&gt; â†’ &lt;strong&gt;(global)&lt;/strong&gt; â†’ &lt;strong&gt;Add Credentials&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ç±»å‹é€‰æ‹©ï¼š&lt;strong&gt;SSH Username with Private Key&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é…ç½®ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Username&lt;/strong&gt;: &lt;code&gt;git&lt;/code&gt;ï¼ˆGitea é»˜è®¤çš„ SSH ç”¨æˆ·åï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Private Key&lt;/strong&gt;: ç²˜è´´ &lt;code&gt;id_rsa&lt;/code&gt; å†…å®¹ï¼ˆç§é’¥ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ID&lt;/strong&gt;: &lt;code&gt;gitea-ssh&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;æ­¥éª¤-4é…ç½®-jenkins-job-ä½¿ç”¨-ssh-æ‹‰ä»“åº“&#34;&gt;æ­¥éª¤ 4ï¼šé…ç½® Jenkins Job ä½¿ç”¨ SSH æ‹‰ä»“åº“
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Git URL ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;git@your-gitea-host:youruser/yourrepo.git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡­æ®&lt;/strong&gt;ï¼šé€‰æ‹© &lt;code&gt;gitea-ssh&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-æ„å»ºè„šæœ¬&#34;&gt;ğŸ§© æ„å»ºè„šæœ¬
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; -e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®šä¹‰å˜é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;BUILD_DIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$WORKSPACE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;DEPLOY_DIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/var/www/wms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;CONTAINER_NAME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;webman-admin-php82
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ğŸ“¦ åŒæ­¥ä»£ç åˆ°å®¹å™¨...&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker cp &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$BUILD_DIR&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/.&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$CONTAINER_NAME&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$DEPLOY_DIR&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ğŸš€ åœ¨å®¹å™¨å†…æ‰§è¡Œéƒ¨ç½²...&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -i &lt;span class=&#34;nv&#34;&gt;$CONTAINER_NAME&lt;/span&gt; sh -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    cd &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$DEPLOY_DIR&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    composer install --no-dev -o &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    php start.php stop &amp;amp;&amp;amp; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;    php start.php start -d
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;âœ… éƒ¨ç½²å®Œæˆï¼&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;-è„šæœ¬è¯´æ˜&#34;&gt;ğŸ“ è„šæœ¬è¯´æ˜
&lt;/h2&gt;&lt;h3 id=&#34;å˜é‡å®šä¹‰&#34;&gt;å˜é‡å®šä¹‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BUILD_DIR=$WORKSPACE&lt;/code&gt;ï¼šJenkins å·¥ä½œç©ºé—´ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DEPLOY_DIR=/var/www/wms&lt;/code&gt;ï¼šå®¹å™¨å†…çš„éƒ¨ç½²ç›®å½•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CONTAINER_NAME=webman-admin-php82&lt;/code&gt;ï¼šç›®æ ‡å®¹å™¨åç§°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;éƒ¨ç½²æµç¨‹&#34;&gt;éƒ¨ç½²æµç¨‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥ä»£ç &lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;docker cp&lt;/code&gt; å°†æ„å»ºç›®å½•çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨å†…&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰è£…ä¾èµ–&lt;/strong&gt;ï¼šåœ¨å®¹å™¨å†…æ‰§è¡Œ &lt;code&gt;composer install --no-dev -o&lt;/code&gt; å®‰è£…ç”Ÿäº§ç¯å¢ƒä¾èµ–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¯æœåŠ¡&lt;/strong&gt;ï¼šåœæ­¢å¹¶é‡æ–°å¯åŠ¨ Webman æœåŠ¡&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å…³é”®å‚æ•°è¯´æ˜&#34;&gt;å…³é”®å‚æ•°è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--no-dev&lt;/code&gt;ï¼šä¸å®‰è£…å¼€å‘ä¾èµ–&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o&lt;/code&gt;ï¼šä¼˜åŒ–è‡ªåŠ¨åŠ è½½å™¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-d&lt;/code&gt;ï¼šä»¥å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼å¯åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-æ³¨æ„äº‹é¡¹&#34;&gt;ğŸ”§ æ³¨æ„äº‹é¡¹
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨çŠ¶æ€&lt;/strong&gt;ï¼šç¡®ä¿ç›®æ ‡å®¹å™¨ &lt;code&gt;webman-admin-php82&lt;/code&gt; æ­£åœ¨è¿è¡Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™é—®é¢˜&lt;/strong&gt;ï¼šJenkins éœ€è¦æœ‰æ‰§è¡Œ Docker å‘½ä»¤çš„æƒé™&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®å½•æƒé™&lt;/strong&gt;ï¼šç¡®ä¿å®¹å™¨å†…çš„éƒ¨ç½²ç›®å½•æœ‰æ­£ç¡®çš„è¯»å†™æƒé™&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡ä¾èµ–&lt;/strong&gt;ï¼šå¦‚æœé¡¹ç›®ä¾èµ–æ•°æ®åº“ç­‰æœåŠ¡ï¼Œç¡®ä¿è¿™äº›æœåŠ¡å·²å¯åŠ¨&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;-æ•…éšœæ’é™¤&#34;&gt;ğŸš¨ æ•…éšœæ’é™¤
&lt;/h2&gt;&lt;h3 id=&#34;å¸¸è§é—®é¢˜&#34;&gt;å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¹å™¨ä¸å­˜åœ¨&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error: No such container: webman-admin-php82
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§£å†³ï¼šæ£€æŸ¥å®¹å™¨åç§°æ˜¯å¦æ­£ç¡®ï¼Œå®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æƒé™è¢«æ‹’ç»&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;permission denied &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; trying to connect to the Docker daemon socket
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§£å†³ï¼šå°† Jenkins ç”¨æˆ·æ·»åŠ åˆ° docker ç»„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Composer å®‰è£…å¤±è´¥&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;composer install failed
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–é…ç½® Composer é•œåƒæº&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è°ƒè¯•æŠ€å·§&#34;&gt;è°ƒè¯•æŠ€å·§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åœ¨è„šæœ¬ä¸­æ·»åŠ æ›´å¤š &lt;code&gt;echo&lt;/code&gt; è¯­å¥æ¥è·Ÿè¸ªæ‰§è¡Œè¿›åº¦&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;docker logs $CONTAINER_NAME&lt;/code&gt; æŸ¥çœ‹å®¹å™¨æ—¥å¿—&lt;/li&gt;
&lt;li&gt;ä¸´æ—¶ç§»é™¤ &lt;code&gt;set -e&lt;/code&gt; æ¥ç»§ç»­æ‰§è¡Œåç»­å‘½ä»¤è¿›è¡Œè°ƒè¯•&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-ç›¸å…³èµ„æº&#34;&gt;ğŸ“š ç›¸å…³èµ„æº
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.workerman.net/doc/webman&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Webman å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jenkins.io/doc/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Jenkins å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.docker.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Docker å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.gitea.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Gitea å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
