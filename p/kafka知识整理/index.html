<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Kafka ÁÆÄ‰ªã Kafka ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊµÅÂ§ÑÁêÜÂπ≥Âè∞ÔºåÊúÄÂàùÁî± LinkedIn ÂºÄÂèëÔºåÂêéÊù•Êàê‰∏∫ Apache È°πÁõÆ„ÄÇÂÆÉÂÖ∑ÊúâÈ´òÂêûÂêêÈáè„ÄÅÂèØÈù†ÊÄßÂíåÂèØÊâ©Â±ïÊÄßÁöÑÁâπÁÇπÔºåË¢´ÂπøÊ≥õÂ∫îÁî®‰∫éÊó•ÂøóÊî∂ÈõÜ„ÄÅÊ∂àÊÅØÁ≥ªÁªü„ÄÅÊ¥ªÂä®ËøΩË∏™„ÄÅÊµÅÂºèÂ§ÑÁêÜÁ≠âÂú∫ÊôØ„ÄÇ\n">
<title>KafkaÁü•ËØÜÊï¥ÁêÜ</title>

<link rel='canonical' href='https://hollisho.github.io/p/kafka%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="KafkaÁü•ËØÜÊï¥ÁêÜ">
<meta property='og:description' content="Kafka ÁÆÄ‰ªã Kafka ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊµÅÂ§ÑÁêÜÂπ≥Âè∞ÔºåÊúÄÂàùÁî± LinkedIn ÂºÄÂèëÔºåÂêéÊù•Êàê‰∏∫ Apache È°πÁõÆ„ÄÇÂÆÉÂÖ∑ÊúâÈ´òÂêûÂêêÈáè„ÄÅÂèØÈù†ÊÄßÂíåÂèØÊâ©Â±ïÊÄßÁöÑÁâπÁÇπÔºåË¢´ÂπøÊ≥õÂ∫îÁî®‰∫éÊó•ÂøóÊî∂ÈõÜ„ÄÅÊ∂àÊÅØÁ≥ªÁªü„ÄÅÊ¥ªÂä®ËøΩË∏™„ÄÅÊµÅÂºèÂ§ÑÁêÜÁ≠âÂú∫ÊôØ„ÄÇ\n">
<meta property='og:url' content='https://hollisho.github.io/p/kafka%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/'>
<meta property='og:site_name' content='HoCode'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-01-10T11:34:49&#43;08:00'/><meta property='article:modified_time' content='2024-01-10T11:34:49&#43;08:00'/>
<meta name="twitter:title" content="KafkaÁü•ËØÜÊï¥ÁêÜ">
<meta name="twitter:description" content="Kafka ÁÆÄ‰ªã Kafka ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊµÅÂ§ÑÁêÜÂπ≥Âè∞ÔºåÊúÄÂàùÁî± LinkedIn ÂºÄÂèëÔºåÂêéÊù•Êàê‰∏∫ Apache È°πÁõÆ„ÄÇÂÆÉÂÖ∑ÊúâÈ´òÂêûÂêêÈáè„ÄÅÂèØÈù†ÊÄßÂíåÂèØÊâ©Â±ïÊÄßÁöÑÁâπÁÇπÔºåË¢´ÂπøÊ≥õÂ∫îÁî®‰∫éÊó•ÂøóÊî∂ÈõÜ„ÄÅÊ∂àÊÅØÁ≥ªÁªü„ÄÅÊ¥ªÂä®ËøΩË∏™„ÄÅÊµÅÂºèÂ§ÑÁêÜÁ≠âÂú∫ÊôØ„ÄÇ\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_1badc3931a35b1a0.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üßê</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">HoCode</a></h1>
            <h2 class="site-description">ÈöæÂæó‰∏ÄË∫´Â•ΩÊú¨È¢Ü</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/hollisho'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://gitee.com/hollisho'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Gitee</title><path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.15a.592.592 0 0 1-.592-.592v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>È¶ñÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÊäÄÊúØÈìæÊé•</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#kafka-ÁÆÄ‰ªã">Kafka ÁÆÄ‰ªã</a></li>
    <li><a href="#kafka-Êû∂ÊûÑËÆæËÆ°">Kafka Êû∂ÊûÑËÆæËÆ°</a>
      <ol>
        <li><a href="#broker">Broker</a></li>
        <li><a href="#producer">Producer</a></li>
        <li><a href="#consumer">Consumer</a></li>
        <li><a href="#topic">Topic</a></li>
        <li><a href="#partition">Partition</a></li>
        <li><a href="#segment">Segment</a></li>
        <li><a href="#log">Log</a></li>
        <li><a href="#zookeeper">ZooKeeper</a></li>
      </ol>
    </li>
    <li><a href="#kafka-ÂâØÊú¨ÂêåÊ≠•ÊñπÂºè">Kafka ÂâØÊú¨ÂêåÊ≠•ÊñπÂºè</a>
      <ol>
        <li><a href="#1-ack0-ÂçäÂêåÊ≠•Â§çÂà∂">1. ack=0 (ÂçäÂêåÊ≠•Â§çÂà∂)</a></li>
        <li><a href="#2-ack1-ÂºÇÊ≠•Â§çÂà∂">2. ack=1 (ÂºÇÊ≠•Â§çÂà∂)</a></li>
        <li><a href="#3-ackall-1-ÂêåÊ≠•Â§çÂà∂">3. ack=all/-1 (ÂêåÊ≠•Â§çÂà∂)</a></li>
        <li><a href="#isr-Êú∫Âà∂-in-sync-replicas">ISR Êú∫Âà∂ (In-Sync Replicas)</a></li>
      </ol>
    </li>
    <li><a href="#kafka-Ê∂àÊÅØÂèëÈÄÅÊµÅÁ®ã">Kafka Ê∂àÊÅØÂèëÈÄÅÊµÅÁ®ã</a></li>
    <li><a href="#kafka-Ê∂àÊÅØÂ≠òÂÇ®ÊµÅÁ®ã">Kafka Ê∂àÊÅØÂ≠òÂÇ®ÊµÅÁ®ã</a></li>
    <li><a href="#kafka-Ê∂àÊÅØÊ∂àË¥πÊµÅÁ®ã">Kafka Ê∂àÊÅØÊ∂àË¥πÊµÅÁ®ã</a></li>
    <li><a href="#‰∏ª‰ªéÂêåÊ≠•">‰∏ª‰ªéÂêåÊ≠•</a></li>
    <li><a href="#È´òÂèØÁî®">È´òÂèØÁî®</a></li>
    <li><a href="#Ê∂àÊÅØÈ°∫Â∫è">Ê∂àÊÅØÈ°∫Â∫è</a></li>
    <li><a href="#Ê∂àÊÅØÈáçÂ§ç">Ê∂àÊÅØÈáçÂ§ç</a></li>
    <li><a href="#Ê∂àÊÅØ‰∏¢Â§±">Ê∂àÊÅØ‰∏¢Â§±</a></li>
    <li><a href="#Ê∂àÊÅØÁßØÂéã">Ê∂àÊÅØÁßØÂéã</a></li>
    <li><a href="#Ê∂àÊÅØÂª∂Ëøü">Ê∂àÊÅØÂª∂Ëøü</a></li>
    <li><a href="#Èõ∂Êã∑Ë¥ù">Èõ∂Êã∑Ë¥ù</a></li>
    <li><a href="#kafka-Ë∞É‰ºò">Kafka Ë∞É‰ºò</a>
      <ol>
        <li><a href="#broker-Ë∞É‰ºò">Broker Ë∞É‰ºò</a></li>
        <li><a href="#producer-Ë∞É‰ºò">Producer Ë∞É‰ºò</a></li>
        <li><a href="#consumer-Ë∞É‰ºò">Consumer Ë∞É‰ºò</a></li>
      </ol>
    </li>
    <li><a href="#kafka-Â≠òÂÇ®ÁªìÊûÑËØ¶Ëß£">Kafka Â≠òÂÇ®ÁªìÊûÑËØ¶Ëß£</a>
      <ol>
        <li><a href="#topic-‰∏é-partition">Topic ‰∏é Partition</a></li>
        <li><a href="#segment-Êñá‰ª∂">Segment Êñá‰ª∂</a></li>
        <li><a href="#Á¥¢ÂºïÊú∫Âà∂">Á¥¢ÂºïÊú∫Âà∂</a></li>
        <li><a href="#Êó•ÂøóÊ∏ÖÁêÜ">Êó•ÂøóÊ∏ÖÁêÜ</a></li>
        <li><a href="#Êñá‰ª∂Á≥ªÁªü‰∏éÈ°µÁºìÂ≠ò">Êñá‰ª∂Á≥ªÁªü‰∏éÈ°µÁºìÂ≠ò</a></li>
        <li><a href="#Â≠òÂÇ®Ê†ºÂºè">Â≠òÂÇ®Ê†ºÂºè</a></li>
        <li><a href="#ÊâπÈáèÂÜôÂÖ•‰∏éÂéãÁº©">ÊâπÈáèÂÜôÂÖ•‰∏éÂéãÁº©</a></li>
      </ol>
    </li>
    <li><a href="#Â≠òÂÇ®‰ºòÂåñÊúÄ‰Ω≥ÂÆûË∑µ">Â≠òÂÇ®‰ºòÂåñÊúÄ‰Ω≥ÂÆûË∑µ</a></li>
    <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" >
                Ê∂àÊÅØÈòüÂàó
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/kafka%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/">KafkaÁü•ËØÜÊï¥ÁêÜ</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2024-01-10 11:34</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="kafka-ÁÆÄ‰ªã">Kafka ÁÆÄ‰ªã
</h2><p>Kafka ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊµÅÂ§ÑÁêÜÂπ≥Âè∞ÔºåÊúÄÂàùÁî± LinkedIn ÂºÄÂèëÔºåÂêéÊù•Êàê‰∏∫ Apache È°πÁõÆ„ÄÇÂÆÉÂÖ∑ÊúâÈ´òÂêûÂêêÈáè„ÄÅÂèØÈù†ÊÄßÂíåÂèØÊâ©Â±ïÊÄßÁöÑÁâπÁÇπÔºåË¢´ÂπøÊ≥õÂ∫îÁî®‰∫éÊó•ÂøóÊî∂ÈõÜ„ÄÅÊ∂àÊÅØÁ≥ªÁªü„ÄÅÊ¥ªÂä®ËøΩË∏™„ÄÅÊµÅÂºèÂ§ÑÁêÜÁ≠âÂú∫ÊôØ„ÄÇ</p>
<h2 id="kafka-Êû∂ÊûÑËÆæËÆ°">Kafka Êû∂ÊûÑËÆæËÆ°
</h2><p>Kafka ÁöÑÊ†∏ÂøÉÊû∂ÊûÑÂåÖÂê´‰ª•‰∏ãÂá†‰∏™ÂÖ≥ÈîÆÁªÑ‰ª∂Ôºö</p>
<h3 id="broker">Broker
</h3><p>Broker ÊòØ Kafka ÈõÜÁæ§‰∏≠ÁöÑÊúçÂä°Âô®ËäÇÁÇπÔºåË¥üË¥£Êé•Êî∂ÂíåÂ§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåÂ≠òÂÇ®Ê∂àÊÅØÊï∞ÊçÆ„ÄÇÊØè‰∏™ Broker ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ IDÔºåÂèØ‰ª•Áã¨Á´ãËøêË°å„ÄÇ</p>
<h3 id="producer">Producer
</h3><p>Producer ÊòØÊ∂àÊÅØÁîü‰∫ßËÄÖÔºåË¥üË¥£Â∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ Kafka ÈõÜÁæ§‰∏≠ÁöÑÁâπÂÆö Topic„ÄÇProducer ÂèØ‰ª•ÈÄâÊã©ÂêåÊ≠•ÊàñÂºÇÊ≠•ÁöÑÊñπÂºèÂèëÈÄÅÊ∂àÊÅØ„ÄÇ</p>
<h3 id="consumer">Consumer
</h3><p>Consumer ÊòØÊ∂àÊÅØÊ∂àË¥πËÄÖÔºåË¥üË¥£‰ªé Kafka ÈõÜÁæ§‰∏≠ËÆ¢ÈòÖÂπ∂Ê∂àË¥πÊ∂àÊÅØ„ÄÇConsumer ÂèØ‰ª•ÂçïÁã¨Ê∂àË¥πÔºå‰πüÂèØ‰ª•ÁªÑÊàê Consumer Group ÂÖ±ÂêåÊ∂àË¥π„ÄÇ</p>
<h3 id="topic">Topic
</h3><p>Topic ÊòØÊ∂àÊÅØÁöÑÈÄªËæëÂàÜÁ±ªÔºåÊØè‰∏™ Topic ÂèØ‰ª•ÊúâÂ§ö‰∏™ Partition„ÄÇProducer ÂèëÈÄÅÊ∂àÊÅØÂà∞ÁâπÂÆöÁöÑ TopicÔºåConsumer ‰ªéÁâπÂÆöÁöÑ Topic Ê∂àË¥πÊ∂àÊÅØ„ÄÇ</p>
<h3 id="partition">Partition
</h3><p>Partition ÊòØ Topic ÁöÑÁâ©ÁêÜÂàÜÂå∫ÔºåÊØè‰∏™ Partition ÊòØ‰∏Ä‰∏™ÊúâÂ∫èÁöÑ„ÄÅ‰∏çÂèØÂèòÁöÑÊ∂àÊÅØÂ∫èÂàó„ÄÇPartition ÁöÑÂºïÂÖ•‰ΩøÂæó Kafka ÂèØ‰ª•ÂÆûÁé∞Ê∞¥Âπ≥Êâ©Â±ïÂíåÂπ∂Ë°åÂ§ÑÁêÜ„ÄÇ</p>
<h3 id="segment">Segment
</h3><p>Segment ÊòØ Partition ÁöÑÁâ©ÁêÜÂ≠òÂÇ®ÂçïÂÖÉÔºåÊØè‰∏™ Partition Áî±Â§ö‰∏™ Segment ÁªÑÊàê„ÄÇÂΩì Segment ËææÂà∞‰∏ÄÂÆöÂ§ßÂ∞èÊàñÊó∂Èó¥ÈòàÂÄºÊó∂Ôºå‰ºöÂàõÂª∫Êñ∞ÁöÑ Segment„ÄÇ</p>
<h3 id="log">Log
</h3><p>Log ÊòØ Kafka ‰∏≠ÊúÄÂü∫Êú¨ÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÂçïÂÖÉÔºåÊØè‰∏™ Partition ÂØπÂ∫î‰∏Ä‰∏™ LogÔºåLog Áî±Â§ö‰∏™ Segment Êñá‰ª∂ÁªÑÊàê„ÄÇ</p>
<h3 id="zookeeper">ZooKeeper
</h3><p>ZooKeeper Áî®‰∫éÁÆ°ÁêÜÂíåÂçèË∞É Kafka ÈõÜÁæ§ÔºåÂ≠òÂÇ®ÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÂ¶Ç Broker ËäÇÁÇπ„ÄÅTopic ÈÖçÁΩÆ„ÄÅÊ∂àË¥πËÄÖÂÅèÁßªÈáèÁ≠â„ÄÇÔºàÊ≥®ÔºöÊñ∞ÁâàÊú¨ Kafka Ê≠£Âú®ÈÄêÊ≠•ÂáèÂ∞ëÂØπ ZooKeeper ÁöÑ‰æùËµñÔºâ</p>
<h2 id="kafka-ÂâØÊú¨ÂêåÊ≠•ÊñπÂºè">Kafka ÂâØÊú¨ÂêåÊ≠•ÊñπÂºè
</h2><p>Kafka Êèê‰æõ‰∫Ü‰∏âÁßç‰∏çÂêåÁöÑÂâØÊú¨ÂêåÊ≠•ÊñπÂºèÔºåÈÄöËøá <code>acks</code> ÂèÇÊï∞ÊéßÂà∂Ôºö</p>
<h3 id="1-ack0-ÂçäÂêåÊ≠•Â§çÂà∂">1. ack=0 (ÂçäÂêåÊ≠•Â§çÂà∂)
</h3><ul>
<li>Producer ÂèëÈÄÅÊ∂àÊÅØÂêé‰∏çÁ≠âÂæÖ‰ªª‰ΩïÁ°ÆËÆ§</li>
<li>ÊúÄÈ´òÁöÑÂêûÂêêÈáèÔºå‰ΩÜÊó†Ê≥ï‰øùËØÅÊ∂àÊÅØÂ∑≤Ë¢´Êé•Êî∂</li>
<li>ÂèØËÉΩÂØºËá¥Ê∂àÊÅØ‰∏¢Â§±</li>
<li>ÈÄÇÁî®‰∫éÂØπÊï∞ÊçÆ‰∏ÄËá¥ÊÄßË¶ÅÊ±Ç‰∏çÈ´òÁöÑÂú∫ÊôØÔºåÂ¶ÇÊó•ÂøóÊî∂ÈõÜ</li>
</ul>
<h3 id="2-ack1-ÂºÇÊ≠•Â§çÂà∂">2. ack=1 (ÂºÇÊ≠•Â§çÂà∂)
</h3><ul>
<li>Producer ÂèëÈÄÅÊ∂àÊÅØÂêéÔºåÁ≠âÂæÖ Leader ÂâØÊú¨Á°ÆËÆ§</li>
<li>‰∏çÁ≠âÂæÖ Follower ÂâØÊú¨ÂêåÊ≠•ÂÆåÊàê</li>
<li>Âú® Leader Â¥©Ê∫ÉÊó∂ÂèØËÉΩ‰∏¢Â§±Êï∞ÊçÆ</li>
<li>ÂêûÂêêÈáèÂíåÂèØÈù†ÊÄßÁöÑÊäò‰∏≠ÊñπÊ°à</li>
</ul>
<h3 id="3-ackall-1-ÂêåÊ≠•Â§çÂà∂">3. ack=all/-1 (ÂêåÊ≠•Â§çÂà∂)
</h3><ul>
<li>Producer ÂèëÈÄÅÊ∂àÊÅØÂêéÔºåÁ≠âÂæÖÊâÄÊúâ ISR ‰∏≠ÁöÑÂâØÊú¨Á°ÆËÆ§</li>
<li>ÊúÄÈ´òÁöÑÂèØÈù†ÊÄßÔºå‰ΩÜÂêûÂêêÈáèÊúÄ‰Ωé</li>
<li>Âè™Ë¶ÅÊúâ‰∏Ä‰∏™ ISR ‰∏≠ÁöÑÂâØÊú¨Â≠òÊ¥ªÔºåÂ∞±‰∏ç‰ºö‰∏¢Â§±Êï∞ÊçÆ</li>
<li>ÈÄÇÁî®‰∫éÂØπÊï∞ÊçÆ‰∏ÄËá¥ÊÄßË¶ÅÊ±ÇÈ´òÁöÑÂú∫ÊôØÔºåÂ¶ÇÈáëËûç‰∫§Êòì</li>
</ul>
<h3 id="isr-Êú∫Âà∂-in-sync-replicas">ISR Êú∫Âà∂ (In-Sync Replicas)
</h3><ul>
<li>ISR ÊòØ‰∏é Leader ‰øùÊåÅÂêåÊ≠•ÁöÑÂâØÊú¨ÈõÜÂêà</li>
<li>AR (Assigned Replicas) = ISR (In-Sync Replicas) + OSR (Out-of-Sync Replicas)</li>
<li>ÂâØÊú¨ÊªûÂêéË∂ÖËøá <code>replica.lag.time.max.ms</code> ‰ºöË¢´Ë∏¢Âá∫ ISR</li>
<li>ÂΩìÂâØÊú¨ÈáçÊñ∞ËøΩ‰∏ä Leader Êó∂Ôºå‰ºöË¢´ÈáçÊñ∞Âä†ÂÖ• ISR</li>
<li>ISR Êú∫Âà∂ÊòØ Kafka ÂÆûÁé∞È´òÂèØÁî®ÂíåÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÁöÑÊ†∏ÂøÉ</li>
</ul>
<h2 id="kafka-Ê∂àÊÅØÂèëÈÄÅÊµÅÁ®ã">Kafka Ê∂àÊÅØÂèëÈÄÅÊµÅÁ®ã
</h2><ol>
<li>Producer ÂàõÂª∫ ProducerRecordÔºåÊåáÂÆö Topic ÂíåÊ∂àÊÅØÂÜÖÂÆπ</li>
<li>Ê∂àÊÅØÁªèËøáÂ∫èÂàóÂåñÂô®„ÄÅÂàÜÂå∫Âô®Â§ÑÁêÜ</li>
<li>ÂàÜÂå∫Âô®Ê†πÊçÆ Key ÊàñËΩÆËØ¢ÊñπÂºèÈÄâÊã©ÁõÆÊ†á Partition</li>
<li>Ê∂àÊÅØË¢´Ê∑ªÂä†Âà∞ÂÜÖÂ≠ò‰∏≠ÁöÑÊâπÊ¨° (Batch)</li>
<li>Sender Á∫øÁ®ãÂÆöÊúüÂ∞ÜÊâπÊ¨°ÂèëÈÄÅÂà∞ÂØπÂ∫îÁöÑ Broker</li>
<li>Broker Êé•Êî∂Ê∂àÊÅØÂπ∂ÂÜôÂÖ•ÂØπÂ∫î Partition ÁöÑ Leader ÂâØÊú¨</li>
<li>Ê†πÊçÆ acks ÈÖçÁΩÆÔºåÁ≠âÂæÖÂâØÊú¨ÂêåÊ≠•ÂÆåÊàê</li>
<li>ËøîÂõûÂìçÂ∫îÁªô Producer</li>
</ol>
<h2 id="kafka-Ê∂àÊÅØÂ≠òÂÇ®ÊµÅÁ®ã">Kafka Ê∂àÊÅØÂ≠òÂÇ®ÊµÅÁ®ã
</h2><ol>
<li>Broker Êé•Êî∂Âà∞Ê∂àÊÅØÂêéÔºåÂ∞ÜÂÖ∂ËøΩÂä†Âà∞ÂØπÂ∫î Partition ÁöÑÂΩìÂâçÊ¥ªË∑É Segment ‰∏≠</li>
<li>Ê∂àÊÅØ‰ª•ËøΩÂä†ÂÜôÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÔºåÊèêÈ´òÂÜôÂÖ•ÊïàÁéá</li>
<li>Ê∂àÊÅØÊåâÁÖß Offset È°∫Â∫èÂ≠òÂÇ®ÔºåÊØèÊù°Ê∂àÊÅØÊúâÂîØ‰∏ÄÁöÑ Offset</li>
<li>ÂΩì Segment ËææÂà∞ÈÖçÁΩÆÁöÑÂ§ßÂ∞èÊàñÊó∂Èó¥ÈòàÂÄºÔºåÂàõÂª∫Êñ∞ÁöÑ Segment</li>
<li>ÊóßÁöÑ Segment ‰ºöÂú®ÈÖçÁΩÆÁöÑ‰øùÁïôÊó∂Èó¥ÂêéË¢´Âà†Èô§ÊàñÂéãÁº©</li>
<li>Kafka ‰ΩøÁî®È°µÁºìÂ≠òÂíåÈõ∂Êã∑Ë¥ùÊäÄÊúØ‰ºòÂåñ I/O ÊÄßËÉΩ</li>
</ol>
<h2 id="kafka-Ê∂àÊÅØÊ∂àË¥πÊµÅÁ®ã">Kafka Ê∂àÊÅØÊ∂àË¥πÊµÅÁ®ã
</h2><ol>
<li>Consumer Âêë Coordinator ÂèëÈÄÅ JoinGroup ËØ∑Ê±ÇÂä†ÂÖ•Ê∂àË¥πÁªÑ</li>
<li>Coordinator ÈÄâÊã©‰∏Ä‰∏™ Consumer ‰Ωú‰∏∫ LeaderÔºåËøõË°åÂàÜÂå∫ÂàÜÈÖç</li>
<li>ÂàÜÈÖçÁªìÊûúÈÄöËøá SyncGroup ËØ∑Ê±ÇÂêåÊ≠•ÁªôÊâÄÊúâ Consumer</li>
<li>Consumer ÂêëÂØπÂ∫îÁöÑ Broker ÂèëÈÄÅ Fetch ËØ∑Ê±ÇËé∑ÂèñÊ∂àÊÅØ</li>
<li>Broker ËøîÂõûÊ∂àÊÅØÁªô Consumer</li>
<li>Consumer Â§ÑÁêÜÊ∂àÊÅØÂπ∂ÂÆöÊúüÊèê‰∫§Ê∂àË¥π‰ΩçÁßª (Offset)</li>
<li>‰ΩçÁßªÊèê‰∫§ÂèØ‰ª•ÊòØËá™Âä®ÁöÑÊàñÊâãÂä®ÁöÑÔºå‰øùÂ≠òÂú®ÂÜÖÈÉ® Topic <code>__consumer_offsets</code> ‰∏≠</li>
</ol>
<h2 id="‰∏ª‰ªéÂêåÊ≠•">‰∏ª‰ªéÂêåÊ≠•
</h2><p>Kafka ÁöÑ‰∏ª‰ªéÂêåÊ≠•Âü∫‰∫é Leader-Follower Ê®°ÂûãÔºö</p>
<ol>
<li>ÊØè‰∏™ Partition Êúâ‰∏Ä‰∏™ Leader ÂíåÂ§ö‰∏™ Follower</li>
<li>ÊâÄÊúâËØªÂÜôËØ∑Ê±ÇÈÉΩÁî± Leader Â§ÑÁêÜ</li>
<li>Follower ÈÄöËøá Fetch ËØ∑Ê±Ç‰ªé Leader ÊãâÂèñÊ∂àÊÅØ</li>
<li>HW (High Watermark) Ë°®Á§∫ÊâÄÊúâ ISR ÂâØÊú¨ÈÉΩÂ∑≤Â§çÂà∂ÁöÑ‰ΩçÁΩÆ</li>
<li>LEO (Log End Offset) Ë°®Á§∫ÊØè‰∏™ÂâØÊú¨ÁöÑÊó•ÂøóÊú´Á´Ø‰ΩçÁΩÆ</li>
<li>Ê∂àË¥πËÄÖÂè™ËÉΩÊ∂àË¥πÂà∞ HW ‰ΩçÁΩÆÁöÑÊ∂àÊÅØÔºå‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß</li>
<li>ÂΩì Leader Â§±ÊïàÊó∂Ôºå‰ªé ISR ‰∏≠ÈÄâ‰∏æÊñ∞ÁöÑ Leader</li>
</ol>
<h2 id="È´òÂèØÁî®">È´òÂèØÁî®
</h2><p>Kafka ÈÄöËøá‰ª•‰∏ãÊú∫Âà∂ÂÆûÁé∞È´òÂèØÁî®Ôºö</p>
<ol>
<li><strong>Â§öÂâØÊú¨Êú∫Âà∂</strong>ÔºöÊØè‰∏™ Partition ÂèØ‰ª•ÈÖçÁΩÆÂ§ö‰∏™ÂâØÊú¨ÔºåÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑ Broker ‰∏ä</li>
<li><strong>Leader ÈÄâ‰∏æ</strong>ÔºöÂΩì Leader Â§±ÊïàÊó∂ÔºåController ‰ºö‰ªé ISR ‰∏≠ÈÄâÊã©‰∏Ä‰∏™ Follower Êàê‰∏∫Êñ∞ÁöÑ Leader</li>
<li><strong>Controller ÈÄâ‰∏æ</strong>ÔºöÈõÜÁæ§‰∏≠ÁöÑ‰∏Ä‰∏™ Broker ‰ºöË¢´ÈÄâ‰∏∫ ControllerÔºåË¥üË¥£ÂàÜÂå∫ÂàÜÈÖçÂíåÊïÖÈöúËΩ¨Áßª</li>
<li><strong>Rebalance Êú∫Âà∂</strong>ÔºöÂΩì Consumer Âä†ÂÖ•ÊàñÁ¶ªÂºÄÊ∂àË¥πÁªÑÊó∂Ôºå‰ºöËß¶Âèë RebalanceÔºåÈáçÊñ∞ÂàÜÈÖçÂàÜÂå∫</li>
<li><strong>Ëá™Âä®Âπ≥Ë°°</strong>ÔºöKafka ÊîØÊåÅËá™Âä®Âπ≥Ë°° Leader ÂàÜÂå∫ÔºåÈÅøÂÖçÂçï‰∏™ Broker Ë¥üËΩΩËøáÈ´ò</li>
</ol>
<h2 id="Ê∂àÊÅØÈ°∫Â∫è">Ê∂àÊÅØÈ°∫Â∫è
</h2><p>Kafka ÂØπÊ∂àÊÅØÈ°∫Â∫èÁöÑ‰øùËØÅÔºö</p>
<ol>
<li>Âçï‰∏™ Partition ÂÜÖÁöÑÊ∂àÊÅØÊòØÊúâÂ∫èÁöÑ</li>
<li>‰∏çÂêå Partition ‰πãÈó¥ÁöÑÊ∂àÊÅØÊó†Ê≥ï‰øùËØÅÈ°∫Â∫è</li>
<li>Â¶ÇÊûúÈúÄË¶ÅÂÖ®Â±ÄÈ°∫Â∫èÔºåÂèØ‰ª•‰ΩøÁî®Âè™Êúâ‰∏Ä‰∏™ Partition ÁöÑ Topic</li>
<li>Â¶ÇÊûúÈúÄË¶ÅÊåâ Key È°∫Â∫èÔºåÂèØ‰ª•Á°Æ‰øùÁõ∏Âêå Key ÁöÑÊ∂àÊÅØË∑ØÁî±Âà∞Âêå‰∏Ä‰∏™ Partition</li>
</ol>
<h2 id="Ê∂àÊÅØÈáçÂ§ç">Ê∂àÊÅØÈáçÂ§ç
</h2><p>Ê∂àÊÅØÈáçÂ§çÁöÑÂéüÂõ†ÂíåÂ§ÑÁêÜÔºö</p>
<ol>
<li><strong>ÂéüÂõ†</strong>ÔºöÁΩëÁªúÈóÆÈ¢ò„ÄÅBroker Â¥©Ê∫É„ÄÅConsumer Â¥©Ê∫ÉÁ≠âÂØºËá¥ÈáçËØïÊàñÈáçÊñ∞Ê∂àË¥π</li>
<li><strong>Producer Á´Ø</strong>ÔºöÂêØÁî®ÂπÇÁ≠âÊÄß (<code>enable.idempotence=true</code>) Âíå‰∫ãÂä°ÂäüËÉΩ</li>
<li><strong>Consumer Á´Ø</strong>ÔºöÂÆûÁé∞ÂπÇÁ≠âÊ∂àË¥πÔºåÂ¶Ç‰ΩøÁî®ÂîØ‰∏ÄÊ†áËØÜ„ÄÅÁä∂ÊÄÅÊ£ÄÊü•„ÄÅÂàÜÂ∏ÉÂºèÈîÅÁ≠â</li>
<li><strong>ÊúÄ‰Ω≥ÂÆûË∑µ</strong>ÔºöËÆæËÆ°‰∏öÂä°ÈÄªËæëÊó∂ËÄÉËôëÂπÇÁ≠âÊÄßÔºåÁ°Æ‰øùÂ§öÊ¨°Â§ÑÁêÜÂêå‰∏ÄÊ∂àÊÅØ‰∏ç‰ºö‰∫ßÁîüÂâØ‰ΩúÁî®</li>
</ol>
<h2 id="Ê∂àÊÅØ‰∏¢Â§±">Ê∂àÊÅØ‰∏¢Â§±
</h2><p>Ê∂àÊÅØ‰∏¢Â§±ÁöÑÂú∫ÊôØÂíåÈò≤Ê≠¢Êé™ÊñΩÔºö</p>
<ol>
<li>
<p><strong>Producer Á´Ø</strong>Ôºö</p>
<ul>
<li>‰ΩøÁî® <code>acks=all</code> Á°Æ‰øùÊâÄÊúâ ISR ÂâØÊú¨ÈÉΩÊî∂Âà∞Ê∂àÊÅØ</li>
<li>ÂêØÁî®ÈáçËØïÊú∫Âà∂ (<code>retries</code> ÂèÇÊï∞)</li>
<li>‰ΩøÁî®ÂõûË∞ÉÊú∫Âà∂Á°ÆËÆ§Ê∂àÊÅØÂèëÈÄÅÁªìÊûú</li>
</ul>
</li>
<li>
<p><strong>Broker Á´Ø</strong>Ôºö</p>
<ul>
<li>ÈÖçÁΩÆË∂≥Â§üÁöÑÂâØÊú¨Êï∞ (<code>replication.factor&gt;=3</code>)</li>
<li>ÈÖçÁΩÆÊúÄÂ∞è ISR Êï∞Èáè (<code>min.insync.replicas&gt;=2</code>)</li>
<li>ÂêàÁêÜÈÖçÁΩÆÂà∑ÁõòÁ≠ñÁï• (<code>log.flush.*</code> ÂèÇÊï∞)</li>
</ul>
</li>
<li>
<p><strong>Consumer Á´Ø</strong>Ôºö</p>
<ul>
<li>ÊâãÂä®Êèê‰∫§‰ΩçÁßªÔºåÁ°Æ‰øùÊ∂àÊÅØÂ§ÑÁêÜÊàêÂäüÂêéÂÜçÊèê‰∫§</li>
<li>‰ΩøÁî®‰∫ãÂä°Á°Æ‰øùÊ∂àÊÅØÂ§ÑÁêÜÂíå‰ΩçÁßªÊèê‰∫§ÁöÑÂéüÂ≠êÊÄß</li>
<li>ÈÅøÂÖçÈïøÊó∂Èó¥Â§ÑÁêÜÂçïÊù°Ê∂àÊÅØÔºåÈò≤Ê≠¢‰ºöËØùË∂ÖÊó∂</li>
</ul>
</li>
</ol>
<h2 id="Ê∂àÊÅØÁßØÂéã">Ê∂àÊÅØÁßØÂéã
</h2><p>Ê∂àÊÅØÁßØÂéãÁöÑÂéüÂõ†ÂíåËß£ÂÜ≥ÊñπÊ°àÔºö</p>
<ol>
<li>
<p><strong>ÂéüÂõ†</strong>Ôºö</p>
<ul>
<li>Consumer Â§ÑÁêÜËÉΩÂäõ‰∏çË∂≥</li>
<li>Á™ÅÂèëÊµÅÈáèÈ´òÂ≥∞</li>
<li>Consumer ÂºÇÂ∏∏ÊàñÂÆïÊú∫</li>
<li>ÁΩëÁªúÈóÆÈ¢ò</li>
</ul>
</li>
<li>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
<ul>
<li>Â¢ûÂä† Consumer ÂÆû‰æãÂíå Partition Êï∞Èáè</li>
<li>‰ºòÂåñ Consumer Â§ÑÁêÜÈÄªËæëÔºåÊèêÈ´òÂ§ÑÁêÜÊïàÁéá</li>
<li>ÂÆûÁé∞ËÉåÂéãÊú∫Âà∂ÔºåÊéßÂà∂Áîü‰∫ßÈÄüÂ∫¶</li>
<li>‰ΩøÁî®Êõ¥È´òÊÄßËÉΩÁöÑÁ°¨‰ª∂</li>
<li>‰∏¥Êó∂Â∞ÜÊ∂àÊÅØËΩ¨ÂÇ®Âà∞ÂÖ∂‰ªñÂ≠òÂÇ®ÔºåÁ¶ªÁ∫øÂ§ÑÁêÜ</li>
</ul>
</li>
</ol>
<h2 id="Ê∂àÊÅØÂª∂Ëøü">Ê∂àÊÅØÂª∂Ëøü
</h2><p>Kafka ‰∏≠ÁöÑÂª∂ËøüÊ∂àÊÅØÂÆûÁé∞Ôºö</p>
<ol>
<li>Kafka ÂéüÁîü‰∏çÊîØÊåÅÂª∂ËøüÊ∂àÊÅØÔºå‰ΩÜÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÂºèÂÆûÁé∞Ôºö
<ul>
<li>‰ΩøÁî®ÂÆöÊó∂‰ªªÂä°Êâ´ÊèèÁâπÂÆö Topic</li>
<li>‰ΩøÁî®Êó∂Èó¥ËΩÆÁÆóÊ≥ïÂú®Â∫îÁî®Â±ÇÂÆûÁé∞</li>
<li>ÂàõÂª∫Â§ö‰∏™ Topic ‰ª£Ë°®‰∏çÂêåÁöÑÂª∂ËøüÁ∫ßÂà´</li>
<li>‰ΩøÁî®Â§ñÈÉ®ÁªÑ‰ª∂Â¶Ç Apache Pulsar Êàñ RocketMQ ÁöÑÂª∂ËøüÂäüËÉΩ</li>
</ul>
</li>
</ol>
<h2 id="Èõ∂Êã∑Ë¥ù">Èõ∂Êã∑Ë¥ù
</h2><p>Kafka ‰ΩøÁî®Èõ∂Êã∑Ë¥ùÊäÄÊúØÊèêÈ´òÊÄßËÉΩÔºö</p>
<ol>
<li><strong>‰º†Áªü I/O Ê®°Âûã</strong>ÔºöÊï∞ÊçÆÂú®Á£ÅÁõò„ÄÅÂÜÖÊ†∏Á©∫Èó¥„ÄÅÁî®Êà∑Á©∫Èó¥ÂíåÁΩëÁªú‰πãÈó¥Â§öÊ¨°Êã∑Ë¥ù</li>
<li><strong>Èõ∂Êã∑Ë¥ùÊäÄÊúØ</strong>ÔºöÂà©Áî® <code>sendfile()</code> Á≥ªÁªüË∞ÉÁî®ÔºåÁõ¥Êé•‰ªéÁ£ÅÁõòÂà∞ÁΩëÁªúÊé•Âè£‰º†ËæìÊï∞ÊçÆ</li>
<li><strong>‰ºòÂäø</strong>Ôºö
<ul>
<li>ÂáèÂ∞ëÊï∞ÊçÆÊã∑Ë¥ùÊ¨°Êï∞</li>
<li>ÂáèÂ∞ë‰∏ä‰∏ãÊñáÂàáÊç¢</li>
<li>Èôç‰Ωé CPU ‰ΩøÁî®Áéá</li>
<li>ÊèêÈ´òÂêûÂêêÈáè</li>
</ul>
</li>
<li><strong>Â∫îÁî®Âú∫ÊôØ</strong>ÔºöKafka ÁöÑÊó•ÂøóÊñá‰ª∂‰º†Ëæì„ÄÅConsumer Ê∂àË¥πÊ∂àÊÅØ</li>
</ol>
<h2 id="kafka-Ë∞É‰ºò">Kafka Ë∞É‰ºò
</h2><h3 id="broker-Ë∞É‰ºò">Broker Ë∞É‰ºò
</h3><ul>
<li>ÂêàÁêÜËÆæÁΩÆ <code>num.network.threads</code> Âíå <code>num.io.threads</code></li>
<li>‰ºòÂåñ JVM ÂèÇÊï∞ÔºåÂ¶ÇÂ†ÜÂ§ßÂ∞è„ÄÅGC Á≠ñÁï•</li>
<li>ÈÖçÁΩÆÈÄÇÂΩìÁöÑ <code>log.retention.hours</code> Âíå <code>log.segment.bytes</code></li>
<li>‰ΩøÁî® RAID 10 Á£ÅÁõòÈòµÂàóÊèêÈ´ò I/O ÊÄßËÉΩ</li>
</ul>
<h3 id="producer-Ë∞É‰ºò">Producer Ë∞É‰ºò
</h3><ul>
<li>Â¢ûÂ§ß <code>batch.size</code> Âíå <code>linger.ms</code> ÊèêÈ´òÊâπÈáèÂèëÈÄÅÊïàÁéá</li>
<li>ÈÖçÁΩÆÂêàÈÄÇÁöÑ <code>buffer.memory</code> ÈÅøÂÖçÂÜÖÂ≠òÊ∫¢Âá∫</li>
<li>Ê†πÊçÆÂú∫ÊôØÈÄâÊã©ÂêàÈÄÇÁöÑ <code>compression.type</code></li>
<li>Ë∞ÉÊï¥ <code>max.in.flight.requests.per.connection</code> Âπ≥Ë°°ÂêûÂêêÈáèÂíåÈ°∫Â∫èÊÄß</li>
</ul>
<h3 id="consumer-Ë∞É‰ºò">Consumer Ë∞É‰ºò
</h3><ul>
<li>ÂêàÁêÜËÆæÁΩÆ <code>fetch.min.bytes</code> Âíå <code>fetch.max.wait.ms</code></li>
<li>‰ºòÂåñ <code>max.poll.records</code> ÊéßÂà∂ÂçïÊ¨°ÊãâÂèñÁöÑÊ∂àÊÅØÊï∞Èáè</li>
<li>Ë∞ÉÊï¥ <code>max.poll.interval.ms</code> ÈÅøÂÖçÊ∂àË¥πËÄÖË¢´Ë∏¢Âá∫Ê∂àË¥πÁªÑ</li>
<li>ÂÆûÁé∞Âπ∂Ë°åÂ§ÑÁêÜÊèêÈ´òÊ∂àË¥πÊïàÁéá</li>
</ul>
<h2 id="kafka-Â≠òÂÇ®ÁªìÊûÑËØ¶Ëß£">Kafka Â≠òÂÇ®ÁªìÊûÑËØ¶Ëß£
</h2><p>Kafka ÁöÑÂ≠òÂÇ®ÁªìÊûÑÊòØÂÖ∂È´òÊÄßËÉΩÁöÑÂÖ≥ÈîÆÂõ†Á¥†‰πã‰∏ÄÔºåÂÆÉÈááÁî®‰∫ÜÂàÜÂ±ÇÁöÑÂ≠òÂÇ®ËÆæËÆ°Ôºå‰ªé‰∏äÂà∞‰∏ã‰æùÊ¨°‰∏∫ÔºöTopic„ÄÅPartition„ÄÅSegment„ÄÅIndex Âíå Log„ÄÇ</p>
<h3 id="topic-‰∏é-partition">Topic ‰∏é Partition
</h3><p>Topic ÊòØÊ∂àÊÅØÁöÑÈÄªËæëÂàÜÁ±ªÔºåËÄå Partition ÊòØ Topic ÁöÑÁâ©ÁêÜÂàÜÂå∫„ÄÇÊØè‰∏™ Topic ÂèØ‰ª•ÊúâÂ§ö‰∏™ PartitionÔºåËøô‰∫õ Partition ÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑ Broker ‰∏äÔºåÂÆûÁé∞‰∫ÜÊï∞ÊçÆÁöÑÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÂíåÂπ∂Ë°åÂ§ÑÁêÜ„ÄÇ</p>
<p>Partition ÁöÑÊï∞ÈáèÂÜ≥ÂÆö‰∫Ü Topic ÁöÑÂπ∂Ë°åÂ∫¶ÔºåÂ¢ûÂä† Partition Êï∞ÈáèÂèØ‰ª•ÊèêÈ´òÂêûÂêêÈáèÔºå‰ΩÜ‰πü‰ºöÂ¢ûÂä†Á≥ªÁªüÂºÄÈîÄÂíåÂ§çÊùÇÊÄß„ÄÇPartition ÁöÑÊï∞Èáè‰∏ÄÊó¶ËÆæÂÆöÔºåÈÄöÂ∏∏‰∏çÂª∫ËÆÆÂáèÂ∞ëÔºåÂõ†‰∏∫ËøôÂèØËÉΩÂØºËá¥Êï∞ÊçÆ‰∏¢Â§±„ÄÇ</p>
<h3 id="segment-Êñá‰ª∂">Segment Êñá‰ª∂
</h3><p>ÊØè‰∏™ Partition Áî±Â§ö‰∏™ Segment Êñá‰ª∂ÁªÑÊàêÔºåSegment ÊòØ Kafka Â≠òÂÇ®ÁöÑÂü∫Êú¨Âçï‰Ωç„ÄÇÂΩì Segment ËææÂà∞‰∏ÄÂÆöÂ§ßÂ∞èÔºàÈªòËÆ§ 1GBÔºâÊàñÊó∂Èó¥ÈòàÂÄºÊó∂Ôºå‰ºöÂàõÂª∫Êñ∞ÁöÑ Segment„ÄÇ</p>
<p>Segment Êñá‰ª∂ÂëΩÂêçËßÑÂàô‰∏∫Ôºö<code>[baseOffset].[index|log|timeindex]</code>ÔºåÂÖ∂‰∏≠ <code>baseOffset</code> ÊòØËØ• Segment ‰∏≠Á¨¨‰∏ÄÊù°Ê∂àÊÅØÁöÑ Offset„ÄÇ</p>
<p>ÊØè‰∏™ Segment ÂåÖÂê´‰ª•‰∏ãÊñá‰ª∂Ôºö</p>
<ul>
<li><code>.log</code> Êñá‰ª∂ÔºöÂ≠òÂÇ®ÂÆûÈôÖÁöÑÊ∂àÊÅØÊï∞ÊçÆ</li>
<li><code>.index</code> Êñá‰ª∂ÔºöÂ≠òÂÇ®Ê∂àÊÅØÁöÑÁâ©ÁêÜ‰ΩçÁΩÆÁ¥¢Âºï</li>
<li><code>.timeindex</code> Êñá‰ª∂ÔºöÂ≠òÂÇ®Êó∂Èó¥Êà≥Á¥¢ÂºïÔºàKafka 0.10.0 ÁâàÊú¨ÂêéÂºïÂÖ•Ôºâ</li>
</ul>
<h3 id="Á¥¢ÂºïÊú∫Âà∂">Á¥¢ÂºïÊú∫Âà∂
</h3><p>Kafka ‰ΩøÁî®Á®ÄÁñèÁ¥¢ÂºïÊù•ÊèêÈ´òÊü•ÊâæÊïàÁéá„ÄÇÁ¥¢ÂºïÊñá‰ª∂‰∏≠Âπ∂‰∏çÊòØÊØèÊù°Ê∂àÊÅØÈÉΩÊúâÁ¥¢ÂºïÈ°πÔºåËÄåÊòØÊØèÈöî‰∏ÄÂÆöÂ≠óËäÇÊï∞ÔºàÈªòËÆ§ 4KBÔºâÁöÑÊ∂àÊÅØÊâç‰ºöÂàõÂª∫‰∏Ä‰∏™Á¥¢ÂºïÈ°π„ÄÇ</p>
<p>Á¥¢ÂºïÈ°πÂåÖÂê´‰∏§‰∏™ÈÉ®ÂàÜÔºö</p>
<ul>
<li>Áõ∏ÂØπ OffsetÔºöÊ∂àÊÅØÁöÑ Offset Áõ∏ÂØπ‰∫é Segment Âü∫ÂáÜ Offset ÁöÑÂÄº</li>
<li>Áâ©ÁêÜ‰ΩçÁΩÆÔºöÊ∂àÊÅØÂú® <code>.log</code> Êñá‰ª∂‰∏≠ÁöÑÁâ©ÁêÜ‰ΩçÁΩÆÔºàÂ≠óËäÇÂÅèÁßªÈáèÔºâ</li>
</ul>
<p>ÂΩìÈúÄË¶ÅÊü•ÊâæÁâπÂÆö Offset ÁöÑÊ∂àÊÅØÊó∂ÔºåKafka È¶ñÂÖàÊâæÂà∞ËØ• Offset ÊâÄÂú®ÁöÑ SegmentÔºåÁÑ∂ÂêéÂú®Á¥¢ÂºïÊñá‰ª∂‰∏≠ÊâæÂà∞Â∞è‰∫éÁ≠â‰∫éÁõÆÊ†á Offset ÁöÑÊúÄÂ§ßÁ¥¢ÂºïÈ°πÔºå‰ªéËØ•‰ΩçÁΩÆÂºÄÂßãÈ°∫Â∫èÊâ´Êèè <code>.log</code> Êñá‰ª∂ÔºåÁõ¥Âà∞ÊâæÂà∞ÁõÆÊ†áÊ∂àÊÅØ„ÄÇ</p>
<h3 id="Êó•ÂøóÊ∏ÖÁêÜ">Êó•ÂøóÊ∏ÖÁêÜ
</h3><p>Kafka Êèê‰æõ‰∫Ü‰∏§ÁßçÊó•ÂøóÊ∏ÖÁêÜÁ≠ñÁï•Ôºö</p>
<ol>
<li><strong>Âü∫‰∫éÊó∂Èó¥ÁöÑÂà†Èô§</strong>ÔºöÈÄöËøá <code>log.retention.hours</code> ÈÖçÁΩÆÔºåÂà†Èô§Ë∂ÖËøá‰øùÁïôÊó∂Èó¥ÁöÑÊóß Segment</li>
<li><strong>Âü∫‰∫éÂ§ßÂ∞èÁöÑÂà†Èô§</strong>ÔºöÈÄöËøá <code>log.retention.bytes</code> ÈÖçÁΩÆÔºåÂΩì Partition Â§ßÂ∞èË∂ÖËøáÈòàÂÄºÊó∂ÔºåÂà†Èô§ÊúÄÊóßÁöÑ Segment</li>
<li><strong>Êó•ÂøóÂéãÁº©</strong>ÔºöÈÄöËøá <code>log.cleanup.policy=compact</code> ÈÖçÁΩÆÔºå‰øùÁïôÊØè‰∏™ Key ÁöÑÊúÄÊñ∞ÂÄºÔºåÂà†Èô§ÊóßÂÄº</li>
</ol>
<p>Êó•ÂøóÂéãÁº©ÁâπÂà´ÈÄÇÁî®‰∫éÈúÄË¶Å‰øùÁïôÊúÄÊñ∞Áä∂ÊÄÅÁöÑÂú∫ÊôØÔºåÂ¶ÇÈÖçÁΩÆÊõ¥Êñ∞„ÄÅÁä∂ÊÄÅÂèòÊõ¥Á≠â„ÄÇ</p>
<h3 id="Êñá‰ª∂Á≥ªÁªü‰∏éÈ°µÁºìÂ≠ò">Êñá‰ª∂Á≥ªÁªü‰∏éÈ°µÁºìÂ≠ò
</h3><p>Kafka Áõ¥Êé•‰ΩøÁî®Êñá‰ª∂Á≥ªÁªüÂ≠òÂÇ®Êï∞ÊçÆÔºåËÄå‰∏çÊòØ‰ΩøÁî®Êï∞ÊçÆÂ∫ì„ÄÇÂÆÉÂÖÖÂàÜÂà©Áî®Êìç‰ΩúÁ≥ªÁªüÁöÑÈ°µÁºìÂ≠òÔºàPage CacheÔºâÊù•ÊèêÈ´ò I/O ÊÄßËÉΩÔºö</p>
<ol>
<li>ÂÜôÂÖ•Êìç‰ΩúÔºöËøΩÂä†ÂÜôÂÖ•Êñá‰ª∂Á≥ªÁªüÔºåÁî±Êìç‰ΩúÁ≥ªÁªüË¥üË¥£Âà∑Áõò</li>
<li>ËØªÂèñÊìç‰ΩúÔºö‰ºòÂÖà‰ªéÈ°µÁºìÂ≠òËØªÂèñÔºåÂëΩ‰∏≠ÁéáÈ´òÊó∂ÂèØ‰ª•ÈÅøÂÖçÁ£ÅÁõò I/O</li>
</ol>
<p>ËøôÁßçËÆæËÆ°‰ΩøÂæó Kafka Âú®Â§ÑÁêÜÂ§ßÈáèÊï∞ÊçÆÊó∂‰ªçËÉΩ‰øùÊåÅÈ´òÊÄßËÉΩÔºåÂêåÊó∂ÁÆÄÂåñ‰∫ÜÁ≥ªÁªüÊû∂ÊûÑ„ÄÇ</p>
<h3 id="Â≠òÂÇ®Ê†ºÂºè">Â≠òÂÇ®Ê†ºÂºè
</h3><p>Kafka Ê∂àÊÅØÁöÑÂ≠òÂÇ®Ê†ºÂºèÁªèËøáÁ≤æÂøÉËÆæËÆ°ÔºåÂåÖÂê´‰ª•‰∏ãÂ≠óÊÆµÔºö</p>
<ul>
<li>8 Â≠óËäÇ Offset</li>
<li>4 Â≠óËäÇÊ∂àÊÅØÂ§ßÂ∞è</li>
<li>4 Â≠óËäÇ CRC32 Ê†°È™åÂíå</li>
<li>1 Â≠óËäÇÈ≠îÊï∞ÔºàMagic ByteÔºâ</li>
<li>1 Â≠óËäÇÂ±ûÊÄßÔºàÂéãÁº©Á±ªÂûãÁ≠âÔºâ</li>
<li>4 Â≠óËäÇ Key ÈïøÂ∫¶Ôºà-1 Ë°®Á§∫Ê≤°Êúâ KeyÔºâ</li>
<li>Key Êï∞ÊçÆÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ</li>
<li>4 Â≠óËäÇ Value ÈïøÂ∫¶</li>
<li>Value Êï∞ÊçÆÔºàÂÆûÈôÖÊ∂àÊÅØÂÜÖÂÆπÔºâ</li>
</ul>
<p>ËøôÁßçÊ†ºÂºèËÆæËÆ°Êó¢‰øùËØÅ‰∫ÜÊï∞ÊçÆÂÆåÊï¥ÊÄßÔºåÂèàÂÖºÈ°æ‰∫ÜÂ≠òÂÇ®ÊïàÁéá„ÄÇ</p>
<h3 id="ÊâπÈáèÂÜôÂÖ•‰∏éÂéãÁº©">ÊâπÈáèÂÜôÂÖ•‰∏éÂéãÁº©
</h3><p>Kafka ÊîØÊåÅÊ∂àÊÅØÊâπÈáèÂÜôÂÖ•ÂíåÂéãÁº©Ôºå‰ª•ÊèêÈ´òÂ≠òÂÇ®ÊïàÁéáÂíåÁΩëÁªú‰º†ËæìÊïàÁéáÔºö</p>
<ol>
<li><strong>ÊâπÈáèÂÜôÂÖ•</strong>ÔºöÂ§öÊù°Ê∂àÊÅØÁªÑÊàê‰∏Ä‰∏™ÊâπÊ¨°ÔºàBatchÔºâÔºå‰∏ÄÊ¨°ÊÄßÂÜôÂÖ•Á£ÅÁõò</li>
<li><strong>ÂéãÁº©</strong>ÔºöÊîØÊåÅ GZIP„ÄÅSnappy„ÄÅLZ4„ÄÅZStandard Á≠âÂéãÁº©ÁÆóÊ≥ï</li>
<li><strong>Á´ØÂà∞Á´ØÂéãÁº©</strong>ÔºöProducer ÂéãÁº©ÔºåBroker ‰øùÊåÅÂéãÁº©Áä∂ÊÄÅÂ≠òÂÇ®ÔºåConsumer Ëß£Âéã</li>
</ol>
<p>ÂéãÁº©ÁéáÂèñÂÜ≥‰∫éÊ∂àÊÅØÂÜÖÂÆπÁöÑÁâπÊÄßÔºåÂØπ‰∫éÊñáÊú¨Á±ªÊï∞ÊçÆÔºåÈÄöÂ∏∏ÂèØ‰ª•ËææÂà∞ 3-5 ÂÄçÁöÑÂéãÁº©ÊØî„ÄÇ</p>
<h2 id="Â≠òÂÇ®‰ºòÂåñÊúÄ‰Ω≥ÂÆûË∑µ">Â≠òÂÇ®‰ºòÂåñÊúÄ‰Ω≥ÂÆûË∑µ
</h2><ol>
<li>
<p><strong>ÂêàÁêÜËÆæÁΩÆ Partition Êï∞Èáè</strong>Ôºö</p>
<ul>
<li>ËÄÉËôëÂπ∂Ë°åÂ∫¶ÈúÄÊ±ÇÂíåËµÑÊ∫êÈôêÂà∂</li>
<li>‰∏ÄËà¨Âª∫ËÆÆÊØè‰∏™ Broker ÁöÑ Partition Êï∞‰∏çË∂ÖËøá 2000-4000</li>
</ul>
</li>
<li>
<p><strong>‰ºòÂåñÁ£ÅÁõòÈÖçÁΩÆ</strong>Ôºö</p>
<ul>
<li>‰ΩøÁî® SSD ÊèêÈ´òÈöèÊú∫ËØªÂÜôÊÄßËÉΩ</li>
<li>‰ΩøÁî® RAID 10 ËÄåÈùû RAID 5/6</li>
<li>ÂàÜÁ¶ªÊìç‰ΩúÁ≥ªÁªüÂíåÊï∞ÊçÆÁõÆÂΩï</li>
</ul>
</li>
<li>
<p><strong>Ë∞ÉÊï¥ Segment Â§ßÂ∞è</strong>Ôºö</p>
<ul>
<li>ËæÉÂ∞èÁöÑ Segment ÊúâÂà©‰∫éÂèäÊó∂Ê∏ÖÁêÜËøáÊúüÊï∞ÊçÆ</li>
<li>ËæÉÂ§ßÁöÑ Segment ÂáèÂ∞ëÊñá‰ª∂Êï∞ÈáèÔºåÈôç‰ΩéÁÆ°ÁêÜÂºÄÈîÄ</li>
</ul>
</li>
<li>
<p><strong>ÂêàÁêÜÈÖçÁΩÆ‰øùÁïôÁ≠ñÁï•</strong>Ôºö</p>
<ul>
<li>Ê†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇËÆæÁΩÆ <code>log.retention.hours</code> Âíå <code>log.retention.bytes</code></li>
<li>ÂØπ‰∏çÂêå Topic ËÆæÁΩÆ‰∏çÂêåÁöÑ‰øùÁïôÁ≠ñÁï•</li>
</ul>
</li>
<li>
<p><strong>ÁõëÊéßÁ£ÅÁõò‰ΩøÁî®Áéá</strong>Ôºö</p>
<ul>
<li>‰øùÊåÅË∂≥Â§üÁöÑÁ£ÅÁõòÁ©∫Èó¥ÔºàËá≥Â∞ë 20% Á©∫Èó≤Ôºâ</li>
<li>ËÆæÁΩÆÁ£ÅÁõò‰ΩøÁî®ÁéáÂëäË≠¶</li>
</ul>
</li>
</ol>
<h2 id="ÊÄªÁªì">ÊÄªÁªì
</h2><p>Kafka ‰Ωú‰∏∫‰∏Ä‰∏™È´òÊÄßËÉΩ„ÄÅÂàÜÂ∏ÉÂºèÁöÑÊµÅÂ§ÑÁêÜÂπ≥Âè∞ÔºåÈÄöËøáÁ≤æÂøÉËÆæËÆ°ÁöÑÊû∂ÊûÑÂíåÊú∫Âà∂ÔºåÂÆûÁé∞‰∫ÜÈ´òÂêûÂêêÈáè„ÄÅÂèØÈù†ÊÄßÂíåÂèØÊâ©Â±ïÊÄß„ÄÇÁêÜËß£ Kafka ÁöÑÊ†∏ÂøÉÊ¶ÇÂøµÂíåÂ∑•‰ΩúÂéüÁêÜÔºåÂØπ‰∫éÊûÑÂª∫È´òÊïà„ÄÅÂèØÈù†ÁöÑÊ∂àÊÅØÁ≥ªÁªüËá≥ÂÖ≥ÈáçË¶Å„ÄÇ</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/rabbitmq%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/">
        
        

        <div class="article-details">
            <h2 class="article-title">RabbitmqÁü•ËØÜÊï¥ÁêÜ</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="hollisho/hollisho-blog-talks"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 Hollis Ho
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
