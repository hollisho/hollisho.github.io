<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="自定义内容模板层级 归档页 1 2 3 archive-$posttype.php archive.php index.php 详情页 1 2 3 4 5 $custom.php single-$posttype-$slug.php single-$posttype.php singular.php index.php 自定义分类项目归档页 1 2 3 4 5 taxonomy-$taxonomy-$term.php taxonomy-$taxonomy.php taxonomy.php archive.php index.php 自定义内容详情页默认查询 queried_object 当前内容信息 queried_object_id 当前内容id posts 数组里面只有一个内容信息 post 当前内容信息 is_single = 1 内容详情页 is_singular = 1 详情页 自定义分类项目归档页默认查询 queried_object 分类项目信息 queried_object_id 分类项目id posts 内容列表数组 post 当前内容信息 is_archive = 1 内容详情页 is_tax = 1 自定义的分类方式 自定义内容类型归档页 queried_object 自定义内容类型的信息(如：product) queried_object_id 空 （因为自定义的内容类型是保存在wp_post_type的全局变量中） posts 内容列表数组 post 当前内容信息 is_archive = 1 内容详情页 is_post_type_archive = 1 自定义内容类型归档页 文章添加自定义字段和自定义分类 调取分类方式数据 get_the_taxonomies 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /** * @param int|WP_Post $post Optional. Post ID or WP_Post object. Default is global $post. * @param array $args { * Optional. Arguments about how to format the list of taxonomies. Default empty array. * * @type string $template Template for displaying a taxonomy label and list of terms. * Default is &#34;Label: Terms.&#34; * @type string $term_template Template for displaying a single term in the list. Default is the term name * linked to its archive. * } * @return string[] List of taxonomies. */ function get_the_taxonomies( $post = 0, $args = array() ); //数据返回示例 Array( [category] =&gt; 分类目录：&lt;a href=&#34;http://xxx/category/uncategorized&#34;&gt;未分类&lt;/a&gt;。 [post_copy] =&gt; 文章版权：&lt;a href=&#34;http://xxx/post-copy/yuanchuang&#34;&gt;原创&lt;/a&gt;。 ); the_category（参考主题核心笔记） the_tags（参考主题核心笔记） the_terms 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /** * @param int $post_id Post ID. * @param string $taxonomy Taxonomy name. * @param string $before Optional. String to use before the terms. Default empty. * @param string $sep Optional. String to use between the terms. Default &#39;, &#39;. * @param string $after Optional. String to use after the terms. Default empty. * @return void|false Void on success, false on failure. */ function the_terms( $post_id, $taxonomy, $before = &#39;&#39;, $sep = &#39;, &#39;, $after = &#39;&#39; ) { $term_list = get_the_term_list( $post_id, $taxonomy, $before, $sep, $after ); if ( is_wp_error( $term_list ) ) { return false; } /** * @param string $term_list List of terms to display. * @param string $taxonomy The taxonomy name. * @param string $before String to use before the terms. * @param string $sep String to use between the terms. * @param string $after String to use after the terms. */ echo apply_filters( &#39;the_terms&#39;, $term_list, $taxonomy, $before, $sep, $after ); } //使用举例 the_terms(get_the_ID(), &#39;post_copy&#39;); get_the_terms（纯数据，不带html标签） 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /** * WP_Term Object * * term_id 分类ID * name 分类名称 * slug 分类别名 * description 分类描述 * taxonomy 分类项目的分类方式 post_tag * ...... */ function get_the_terms( $post, $taxonomy ); //使用举例 $terms = get_the_terms(get_the_ID(), &#39;post_copy&#39;); forearch($terms as $term) { echo &#39;分类项目ID：&#39; . $term-&gt;term_id; echo &#39;&lt;br /&gt;分类项目名称：&#39; . $term-&gt;name; echo &#39;&lt;br /&gt;分类项目别名：&#39; . $term-&gt;slug; echo &#39;&lt;br /&gt;分类项目描述：&#39; . $term-&gt;description; echo &#39;&lt;br /&gt;分类项目描述：&#39; . term_description($term-&gt;term_id); echo &#39;&lt;br /&gt;分类项目分类方式：&#39; . $term-&gt;taxonomy; echo &#39;&lt;br /&gt;分类项目下内容数量：&#39; . $term-&gt;count; echo &#39;&lt;br /&gt;分类项目网址：&#39; . get_term_link($term); } 获取分类方式扩展数据 get_term_meta 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /** * @param int $term_id Term ID. * @param string $key Optional. The meta key to retrieve. By default, * returns data for all keys. Default empty. * @param bool $single Optional. Whether to return a single value. * This parameter has no effect if `$key` is not specified. * Default false. * @return mixed An array of values if `$single` is false. * The value of the meta field if `$single` is true. * False for an invalid `$term_id` (non-numeric, zero, or negative value). * An empty string if a valid but non-existing term ID is passed. */ function get_term_meta( $term_id, $key = &#39;&#39;, $single = false ) { return get_metadata( &#39;term&#39;, $term_id, $key, $single ); } 使用示例 1 2 3 4 5 6 7 8 9 $terms = get_the_terms(get_the_ID(), &#39;post_copy&#39;); forearch($terms as $term) { echo &#39;分类项目ID：&#39; . $term-&gt;term_id; echo &#39;&lt;br /&gt;分类项目扩展字段seo_key：&#39; . get_term_meta($term-&gt;term_id, &#39;seo_key&#39;, true); // 获取图片id $pic_id = get_term_meta($term-&gt;term_id, &#39;seo_pic&#39;, true); echo &#39;&lt;br /&gt;分类项目扩展的图片：&#39; . wp_get_attachment_image($pic_id, &#39;thumbnail&#39;); } 获取文章扩展数据 get_post_meta（参考主题核心笔记） 1 2 3 4 5 6 7 8 9 // 在while(have_posts())循环中使用 get_post_meta(get_the_ID(), &#39;seo_key&#39;, true);//返回单个数据 get_post_meta(get_the_ID(), &#39;seo_key&#39;, false);//返回数组 // 获取文章扩展的配图字段 $post_img_ids = get_post_meta(get_the_ID(), &#39;post_img&#39;, false); foreach($post_img_ids as $img_id) { echo wp_get_attachment_image($img_id, &#39;thumbnail&#39;); } 自定义内容类型数据查询 1 2 3 4 5 6 7 $qb = get_queried_object(); // 内容类型的标记名 $qb-&gt;label; // 内容类型的名称 $qb-&gt;name; // 内容类型的描述 $qb-&gt;description; 自定义分类项目归档页数据查询 1 2 3 4 5 6 7 8 9 10 11 12 13 $term = get_queried_object(); // ID $term-&gt;term_id; // 别名 $term-&gt;slug; // 名称 $term-&gt;name; // 图像描述 $term-&gt;description; // 图像描述 term_description($term-&gt;term_id); // 获取扩展的数据 get_term_meta($term-&gt;term_id, &#39;key&#39;, true); 附件和分类方式相关数据的函数 附件相关 wp_get_attachment_image($img_id, $size = 'thumbnail') 1 2 // 返回结果示例 &lt;img src=&#34;http://xxx/xxx.jpg&#34; class=&#34;attachment-thumbnail&#34; alt=&#34;&#34; /&gt; wp_get_attachment_image_src($img_id, $size = 'thumbnail') 1 2 3 4 5 6 7 // 返回结果示例 Array( [0] =&gt; http://xxx/xxx.jpg,//图片url [1] =&gt; 150,//width [2] =&gt; 150,//heigth [3] =&gt; 1 ); wp_get_attachment_url($img_id, $size = 'thumbnail') 1 2 // 返回结果示例 http://xxx/xxx.jpg get_post_meta($img_id, '_wp_attachment_image_alt', true) 1 2 // 返回结果示例 图片的替代文本alt的信息 分类方式相关 获取某个分类方式本身的数据对象 get_taxonomy() 1 2 3 4 5 6 // 获取分类方式信息 get_taxonomy(&#39;category&#39;); // 获取标签信息 get_taxonomy(&#39;post_tag&#39;); // 获取产品分类 get_taxonomy(&#39;product_cat&#39;); 获取指定内容/内容类型关联的分类方式 get_object_taxonomies() 1 2 3 4 5 6 // 使用方式1,参数传内容类型的字符串 get_object_taxonomies(&#39;post&#39;); get_object_taxonomies(&#39;product&#39;); // 使用方式2，参数传内容的对象 get_object_taxonomies(get_post(1)); 判断某个分类方式是否存在 1 2 taxonomy_exists(&#39;product&#39;);//true taxonomy_exists(&#39;demo&#39;);//false 获取附件相关信息的函数 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // 根据附件ID获取附件网址 wp_get_attachment_url($attachment_id); // 根据附件ID获取附件Caption(说明) wp_get_attachment_caption($attachment_id); // 根据附件ID获取附件路径 get_attached_file($attachment_id); // 根据附件ID获取附件meta数据 wp_get_attachment_metadata($attachment_id); // 根据附件ID判断附件是否为图片 wp_attachment_is_image($attachment_id); // 根据附件ID获取图片html标签 wp_get_attachment_image($attachment_id); // 根据附件ID获取图片url/width/height wp_get_attachment_src($attachment_id); // 根据附件ID获取图片的URL地址 wp_get_attachment_url($attachment_id); // 根据附件ID获取图片的alt信息 get_post_meta($attachment_id, &#39;_wp_attachment_image_alt&#39;, true); 自主查询 WP_Query完整示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 //获取特定分类目录下的文章 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__in&#39; =&gt; [12], ]); // 循环输出文章信息 if ($query-&gt;have_posts()) while($query-&gt;have_posts()) { $query-&gt;the_post(); echo &#34;文章标题：&#34; . the_title(); } // 恢复现场 wp_reset_postdata(); WP_Query作者相关查询 author 根据用户ID查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author&#39; =&gt; 3, ]); author_name 根据用户nicename查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author_name&#39; =&gt; &#39;hollis&#39;, ]); author__in 根据多个用户ID查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author__in&#39; =&gt; [3,5], ]); author__not_in 排除某些用户ID 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author__not_in&#39; =&gt; [1], ]); WP_Query分类目录相关查询 cat 子级的分类目录也会查询出来 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;cat&#39; =&gt; &#39;10,11&#39;,//-10,-11前面加负号表示排除 ]); category__in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__in&#39; =&gt; [12,13], ]); category_name 根据分类目录别名查询 1 2 3 4 5 6 7 8 9 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category_name &#39; =&gt; &#39;iphone,xiaomi&#39;, ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category_name &#39; =&gt; &#39;iphone+xiaomi&#39;, // 查询多个分类目录共有的数据 ]); category__and 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__and&#39; =&gt; &#39;12,13&#39;, // 查询多个分类目录共有的数据,类似category_name中的+号 ]); category__not_in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__not_in&#39; =&gt; [14], ]); WP_Query标签相关查询 tag 根据标签别名查询 1 2 3 4 5 6 7 8 9 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag&#39; =&gt; &#39;wordpress,php&#39;, ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag&#39; =&gt; &#39;wordpress+php&#39;,// 查询多个标签共有的数据 ]); tag_id 根据标签id查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag_id&#39; =&gt; &#39;70&#39;, //如果填写多个标签，自动获取第一个标签的数据 ]); tag__in 根据标签的ID编号，从单个或多个标签中获取数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__in&#39; =&gt; [79,81], ]); tag__and 根据标签的ID编号，获取多个标签中共有的数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__and&#39; =&gt; [79,81], ]); tag__not_in 排除指定标签的数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__not_in&#39; =&gt; [80], ]); tag_slug__and 根据标签的别名，获取多个标签中共有的数据 tag_slug__in 根据标签的别名，从单个或多个标签中获取数据 WP_Query分类方式相关查询 tax_query 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 // 根据分类方式别名查询 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;include_children&#39; =&gt; true, //是否包含子分类。默认值：true ] ] ]); // 根据分类方式ID编号查询 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;term_id&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [20], //告诉查询工具，上面指定的字段的值是什么 ] ] ]); // 根据分类方式别名查询，但不包含子分类 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;include_children&#39; =&gt; false, //是否包含子分类。默认值：true ] ] ]); // 从多个分类项目中获取数据 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ] ] ]); // 从多个分类方式的分类项目中获取数据 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ &#39;relation&#39; =&gt; &#39;AND&#39;, //多个分类方式的关系。可用值为AND,OR [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ], [ &#39;taxonomy&#39; =&gt; &#39;post_tag&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ] ] ]); // 复杂查询，带嵌套。 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ &#39;relation&#39; =&gt; &#39;AND&#39;, [ &#39;relation&#39; =&gt; &#39;AND&#39;, [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], ], [ &#39;taxonomy&#39; =&gt; &#39;post_tag&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], ] ], [ &#39;taxonomy&#39; =&gt; &#39;post_copy&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], ] ] ]); WP_Query搜索相关查询 s 会通过正文、摘要、标题等内容搜索内容 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;s&#39; =&gt; &#39;世界&#39;, ]); WP_Query内容相关查询 post_type 查询的内容类型 post page revision attachment nav_menu_item any 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 //查询单个内容类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, ]); //查询多个内容类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; [&#39;post&#39;, &#39;page&#39;, &#39;product&#39;], ]); // 查询附件内容 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inherit&#39;, // 查询附件内容，需要指定内容状态的字段，才能查询出内容 ]); // any $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;any&#39;, //除了设置exclude from search = true的内容类型之外的所有类型 ]); p 根据内容ID编号查询，查询单个 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;p&#39; =&gt; 19, ]); name 根据内容别名slug查询，查询单个 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;name&#39; =&gt; &#39;test-01&#39;, ]); page_id 根据页面ID编号查询 1 2 3 $query = new WP_Query([ &#39;page_id&#39; =&gt; 12 ]); pagename 根据页面别名查询 1 2 3 $query = new WP_Query([ &#39;pagename&#39; =&gt; &#39;test-page-01&#39; ]); post_parent 根据父级id查询 1 2 3 4 5 6 7 8 9 10 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent&#39; =&gt; 10, //查询指定的父级id的内容,只获取直接关系的数据，不会递归获取 ]); // 获取所有顶级页面，post_parent = 0 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent&#39; =&gt; 0, ]); post_parent__in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent__in&#39; =&gt; [10, 11],//查询指定的父级id的内容,只获取直接关系的数据，不会递归获取 ]); post_parent__not_in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent__not_in&#39; =&gt; [10, 11],//排除指定的父级id的内容 ]); post__in 根据多个内容ID编号查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_in&#39; =&gt; [10,11], // 如果填写空数组，会查询指定类型的最新内容 ]); post__not_in 排除指定内容ID编号 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post__not_in&#39; =&gt; [10,11], // 如果填写空数组，会查询指定类型的最新内容 ]); post_name__in 根据内容别名查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_name__in&#39; =&gt; [&#39;test-01&#39;, &#39;test-02&#39;], ]); post_status 根据内容状态查询 publish 已发布 pending 待审核 draft 草稿 auto-draft 自动草稿 future 定时发布 private 私密 inherit 附件的特有的状态 trash 回收站 any 除了auto-draft和trash之外的所有状态 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; &#39;draft&#39; //获取草稿状态的内容 ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; &#39;publish&#39; //获取已发布的内容 ]); // 同时查询多个状态 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; [&#39;publish&#39;, &#39;future&#39;] //获取已发布的和定时发布的内容 ]); comment_count 根据评论数量查询 1 2 3 4 5 6 7 8 9 10 11 12 13 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;comment_count&#39; =&gt; 5 //查询评论数量为5的内容 ]); // 范围查询 &#39;=&#39;, &#39;!=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;, &#39;&lt;&#39;, &#39;&lt;=&#39; 默认值是&#39;=&#39; $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;comment_count&#39; =&gt; [ &#39;value&#39; =&gt; 1, &#39;compare&#39; =&gt; &#39;&gt;=&#39;, //查询评论数量大于等于1的内容 ] ]); date_query 根据日期查询 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;date_query&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 9, //查询9月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ], ]); // 范围查询 如：查询2024年9月1日 - 2024年10月1日的内容 // after 表示xx日期之后 before 表示xx日期之前 // 即：after 2024年9月1日 before 2024年10月1日 // 生成sql语句为 &gt; &#39;2024-09-01 00:00:00&#39; and &lt; &#39;2024-10-01 23:59:59&#39; $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;date_query&#39; =&gt; [ &#39;after&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 9, //查询9月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ], &#39;before&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 10, //查询10月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ] ], ]); WP_Query密码相关查询 has_password 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;has_password&#39; =&gt; true|false|null, //true获取设置了访问密码的内容；false获取没有设置访问密码的内容；null获取所有内容 ]); post_password 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_password&#39; =&gt; &#39;123456&#39;, //获取访问密码为123456的内容 ]); WP_Query自定义字段相关查询 meta_query 根据元数据（自定义字段）查询 1 2 3 4 5 6 7 8 9 10 11 12 // 曾经设置过指定自定义字段的内容。即：wp_post_meta里面有记录 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;meta_query&#39; =&gt; [ [ &#39;key&#39; =&gt; &#39;seo_keywords&#39;, //key指的是字段的名称 &#39;value&#39; =&gt; &#39;&#39;, //value指的是字段的值 &#39;compare&#39; =&gt; &#39;=&#39;, //compare指的是关系. &#39;=&#39;、&#39;!=&#39;等 &#39;type&#39; =&gt; &#39;CHAR&#39;, //type指的是字段数值的类型. &#39;NUMERIC&#39;, &#39;BINARY&#39;, &#39;CHAR&#39;, &#39;DATE&#39;, &#39;DATETIME&#39;, &#39;DECIMAL&#39;, &#39;SIGNED&#39;, &#39;TIME&#39;, &#39;UNSIGNED&#39; 默认值 &#39;CHAR&#39; ] ], ]); WP_Query的MIME类型相关查询 1 2 3 4 5 6 7 8 9 10 11 12 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inhirent&#39;, &#39;post_mime_type&#39; =&gt; &#39;image/jpeg&#39;, // 附件类型string/array ]); // 查询多种类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inhirent&#39;, &#39;post_mime_type&#39; =&gt; [&#39;image/jpeg&#39;, &#39;image/png&#39;], // 附件类型string/array ]); WP_Query排序参数相关查询 order 排序方式\n">
<title>Wordpress主题进阶</title>

<link rel='canonical' href='https://hollisho.github.io/p/wordpress%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Wordpress主题进阶">
<meta property='og:description' content="自定义内容模板层级 归档页 1 2 3 archive-$posttype.php archive.php index.php 详情页 1 2 3 4 5 $custom.php single-$posttype-$slug.php single-$posttype.php singular.php index.php 自定义分类项目归档页 1 2 3 4 5 taxonomy-$taxonomy-$term.php taxonomy-$taxonomy.php taxonomy.php archive.php index.php 自定义内容详情页默认查询 queried_object 当前内容信息 queried_object_id 当前内容id posts 数组里面只有一个内容信息 post 当前内容信息 is_single = 1 内容详情页 is_singular = 1 详情页 自定义分类项目归档页默认查询 queried_object 分类项目信息 queried_object_id 分类项目id posts 内容列表数组 post 当前内容信息 is_archive = 1 内容详情页 is_tax = 1 自定义的分类方式 自定义内容类型归档页 queried_object 自定义内容类型的信息(如：product) queried_object_id 空 （因为自定义的内容类型是保存在wp_post_type的全局变量中） posts 内容列表数组 post 当前内容信息 is_archive = 1 内容详情页 is_post_type_archive = 1 自定义内容类型归档页 文章添加自定义字段和自定义分类 调取分类方式数据 get_the_taxonomies 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /** * @param int|WP_Post $post Optional. Post ID or WP_Post object. Default is global $post. * @param array $args { * Optional. Arguments about how to format the list of taxonomies. Default empty array. * * @type string $template Template for displaying a taxonomy label and list of terms. * Default is &#34;Label: Terms.&#34; * @type string $term_template Template for displaying a single term in the list. Default is the term name * linked to its archive. * } * @return string[] List of taxonomies. */ function get_the_taxonomies( $post = 0, $args = array() ); //数据返回示例 Array( [category] =&gt; 分类目录：&lt;a href=&#34;http://xxx/category/uncategorized&#34;&gt;未分类&lt;/a&gt;。 [post_copy] =&gt; 文章版权：&lt;a href=&#34;http://xxx/post-copy/yuanchuang&#34;&gt;原创&lt;/a&gt;。 ); the_category（参考主题核心笔记） the_tags（参考主题核心笔记） the_terms 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /** * @param int $post_id Post ID. * @param string $taxonomy Taxonomy name. * @param string $before Optional. String to use before the terms. Default empty. * @param string $sep Optional. String to use between the terms. Default &#39;, &#39;. * @param string $after Optional. String to use after the terms. Default empty. * @return void|false Void on success, false on failure. */ function the_terms( $post_id, $taxonomy, $before = &#39;&#39;, $sep = &#39;, &#39;, $after = &#39;&#39; ) { $term_list = get_the_term_list( $post_id, $taxonomy, $before, $sep, $after ); if ( is_wp_error( $term_list ) ) { return false; } /** * @param string $term_list List of terms to display. * @param string $taxonomy The taxonomy name. * @param string $before String to use before the terms. * @param string $sep String to use between the terms. * @param string $after String to use after the terms. */ echo apply_filters( &#39;the_terms&#39;, $term_list, $taxonomy, $before, $sep, $after ); } //使用举例 the_terms(get_the_ID(), &#39;post_copy&#39;); get_the_terms（纯数据，不带html标签） 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /** * WP_Term Object * * term_id 分类ID * name 分类名称 * slug 分类别名 * description 分类描述 * taxonomy 分类项目的分类方式 post_tag * ...... */ function get_the_terms( $post, $taxonomy ); //使用举例 $terms = get_the_terms(get_the_ID(), &#39;post_copy&#39;); forearch($terms as $term) { echo &#39;分类项目ID：&#39; . $term-&gt;term_id; echo &#39;&lt;br /&gt;分类项目名称：&#39; . $term-&gt;name; echo &#39;&lt;br /&gt;分类项目别名：&#39; . $term-&gt;slug; echo &#39;&lt;br /&gt;分类项目描述：&#39; . $term-&gt;description; echo &#39;&lt;br /&gt;分类项目描述：&#39; . term_description($term-&gt;term_id); echo &#39;&lt;br /&gt;分类项目分类方式：&#39; . $term-&gt;taxonomy; echo &#39;&lt;br /&gt;分类项目下内容数量：&#39; . $term-&gt;count; echo &#39;&lt;br /&gt;分类项目网址：&#39; . get_term_link($term); } 获取分类方式扩展数据 get_term_meta 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /** * @param int $term_id Term ID. * @param string $key Optional. The meta key to retrieve. By default, * returns data for all keys. Default empty. * @param bool $single Optional. Whether to return a single value. * This parameter has no effect if `$key` is not specified. * Default false. * @return mixed An array of values if `$single` is false. * The value of the meta field if `$single` is true. * False for an invalid `$term_id` (non-numeric, zero, or negative value). * An empty string if a valid but non-existing term ID is passed. */ function get_term_meta( $term_id, $key = &#39;&#39;, $single = false ) { return get_metadata( &#39;term&#39;, $term_id, $key, $single ); } 使用示例 1 2 3 4 5 6 7 8 9 $terms = get_the_terms(get_the_ID(), &#39;post_copy&#39;); forearch($terms as $term) { echo &#39;分类项目ID：&#39; . $term-&gt;term_id; echo &#39;&lt;br /&gt;分类项目扩展字段seo_key：&#39; . get_term_meta($term-&gt;term_id, &#39;seo_key&#39;, true); // 获取图片id $pic_id = get_term_meta($term-&gt;term_id, &#39;seo_pic&#39;, true); echo &#39;&lt;br /&gt;分类项目扩展的图片：&#39; . wp_get_attachment_image($pic_id, &#39;thumbnail&#39;); } 获取文章扩展数据 get_post_meta（参考主题核心笔记） 1 2 3 4 5 6 7 8 9 // 在while(have_posts())循环中使用 get_post_meta(get_the_ID(), &#39;seo_key&#39;, true);//返回单个数据 get_post_meta(get_the_ID(), &#39;seo_key&#39;, false);//返回数组 // 获取文章扩展的配图字段 $post_img_ids = get_post_meta(get_the_ID(), &#39;post_img&#39;, false); foreach($post_img_ids as $img_id) { echo wp_get_attachment_image($img_id, &#39;thumbnail&#39;); } 自定义内容类型数据查询 1 2 3 4 5 6 7 $qb = get_queried_object(); // 内容类型的标记名 $qb-&gt;label; // 内容类型的名称 $qb-&gt;name; // 内容类型的描述 $qb-&gt;description; 自定义分类项目归档页数据查询 1 2 3 4 5 6 7 8 9 10 11 12 13 $term = get_queried_object(); // ID $term-&gt;term_id; // 别名 $term-&gt;slug; // 名称 $term-&gt;name; // 图像描述 $term-&gt;description; // 图像描述 term_description($term-&gt;term_id); // 获取扩展的数据 get_term_meta($term-&gt;term_id, &#39;key&#39;, true); 附件和分类方式相关数据的函数 附件相关 wp_get_attachment_image($img_id, $size = 'thumbnail') 1 2 // 返回结果示例 &lt;img src=&#34;http://xxx/xxx.jpg&#34; class=&#34;attachment-thumbnail&#34; alt=&#34;&#34; /&gt; wp_get_attachment_image_src($img_id, $size = 'thumbnail') 1 2 3 4 5 6 7 // 返回结果示例 Array( [0] =&gt; http://xxx/xxx.jpg,//图片url [1] =&gt; 150,//width [2] =&gt; 150,//heigth [3] =&gt; 1 ); wp_get_attachment_url($img_id, $size = 'thumbnail') 1 2 // 返回结果示例 http://xxx/xxx.jpg get_post_meta($img_id, '_wp_attachment_image_alt', true) 1 2 // 返回结果示例 图片的替代文本alt的信息 分类方式相关 获取某个分类方式本身的数据对象 get_taxonomy() 1 2 3 4 5 6 // 获取分类方式信息 get_taxonomy(&#39;category&#39;); // 获取标签信息 get_taxonomy(&#39;post_tag&#39;); // 获取产品分类 get_taxonomy(&#39;product_cat&#39;); 获取指定内容/内容类型关联的分类方式 get_object_taxonomies() 1 2 3 4 5 6 // 使用方式1,参数传内容类型的字符串 get_object_taxonomies(&#39;post&#39;); get_object_taxonomies(&#39;product&#39;); // 使用方式2，参数传内容的对象 get_object_taxonomies(get_post(1)); 判断某个分类方式是否存在 1 2 taxonomy_exists(&#39;product&#39;);//true taxonomy_exists(&#39;demo&#39;);//false 获取附件相关信息的函数 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // 根据附件ID获取附件网址 wp_get_attachment_url($attachment_id); // 根据附件ID获取附件Caption(说明) wp_get_attachment_caption($attachment_id); // 根据附件ID获取附件路径 get_attached_file($attachment_id); // 根据附件ID获取附件meta数据 wp_get_attachment_metadata($attachment_id); // 根据附件ID判断附件是否为图片 wp_attachment_is_image($attachment_id); // 根据附件ID获取图片html标签 wp_get_attachment_image($attachment_id); // 根据附件ID获取图片url/width/height wp_get_attachment_src($attachment_id); // 根据附件ID获取图片的URL地址 wp_get_attachment_url($attachment_id); // 根据附件ID获取图片的alt信息 get_post_meta($attachment_id, &#39;_wp_attachment_image_alt&#39;, true); 自主查询 WP_Query完整示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 //获取特定分类目录下的文章 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__in&#39; =&gt; [12], ]); // 循环输出文章信息 if ($query-&gt;have_posts()) while($query-&gt;have_posts()) { $query-&gt;the_post(); echo &#34;文章标题：&#34; . the_title(); } // 恢复现场 wp_reset_postdata(); WP_Query作者相关查询 author 根据用户ID查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author&#39; =&gt; 3, ]); author_name 根据用户nicename查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author_name&#39; =&gt; &#39;hollis&#39;, ]); author__in 根据多个用户ID查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author__in&#39; =&gt; [3,5], ]); author__not_in 排除某些用户ID 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author__not_in&#39; =&gt; [1], ]); WP_Query分类目录相关查询 cat 子级的分类目录也会查询出来 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;cat&#39; =&gt; &#39;10,11&#39;,//-10,-11前面加负号表示排除 ]); category__in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__in&#39; =&gt; [12,13], ]); category_name 根据分类目录别名查询 1 2 3 4 5 6 7 8 9 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category_name &#39; =&gt; &#39;iphone,xiaomi&#39;, ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category_name &#39; =&gt; &#39;iphone+xiaomi&#39;, // 查询多个分类目录共有的数据 ]); category__and 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__and&#39; =&gt; &#39;12,13&#39;, // 查询多个分类目录共有的数据,类似category_name中的+号 ]); category__not_in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__not_in&#39; =&gt; [14], ]); WP_Query标签相关查询 tag 根据标签别名查询 1 2 3 4 5 6 7 8 9 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag&#39; =&gt; &#39;wordpress,php&#39;, ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag&#39; =&gt; &#39;wordpress+php&#39;,// 查询多个标签共有的数据 ]); tag_id 根据标签id查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag_id&#39; =&gt; &#39;70&#39;, //如果填写多个标签，自动获取第一个标签的数据 ]); tag__in 根据标签的ID编号，从单个或多个标签中获取数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__in&#39; =&gt; [79,81], ]); tag__and 根据标签的ID编号，获取多个标签中共有的数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__and&#39; =&gt; [79,81], ]); tag__not_in 排除指定标签的数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__not_in&#39; =&gt; [80], ]); tag_slug__and 根据标签的别名，获取多个标签中共有的数据 tag_slug__in 根据标签的别名，从单个或多个标签中获取数据 WP_Query分类方式相关查询 tax_query 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 // 根据分类方式别名查询 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;include_children&#39; =&gt; true, //是否包含子分类。默认值：true ] ] ]); // 根据分类方式ID编号查询 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;term_id&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [20], //告诉查询工具，上面指定的字段的值是什么 ] ] ]); // 根据分类方式别名查询，但不包含子分类 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;include_children&#39; =&gt; false, //是否包含子分类。默认值：true ] ] ]); // 从多个分类项目中获取数据 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ] ] ]); // 从多个分类方式的分类项目中获取数据 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ &#39;relation&#39; =&gt; &#39;AND&#39;, //多个分类方式的关系。可用值为AND,OR [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ], [ &#39;taxonomy&#39; =&gt; &#39;post_tag&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ] ] ]); // 复杂查询，带嵌套。 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ &#39;relation&#39; =&gt; &#39;AND&#39;, [ &#39;relation&#39; =&gt; &#39;AND&#39;, [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], ], [ &#39;taxonomy&#39; =&gt; &#39;post_tag&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], ] ], [ &#39;taxonomy&#39; =&gt; &#39;post_copy&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], ] ] ]); WP_Query搜索相关查询 s 会通过正文、摘要、标题等内容搜索内容 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;s&#39; =&gt; &#39;世界&#39;, ]); WP_Query内容相关查询 post_type 查询的内容类型 post page revision attachment nav_menu_item any 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 //查询单个内容类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, ]); //查询多个内容类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; [&#39;post&#39;, &#39;page&#39;, &#39;product&#39;], ]); // 查询附件内容 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inherit&#39;, // 查询附件内容，需要指定内容状态的字段，才能查询出内容 ]); // any $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;any&#39;, //除了设置exclude from search = true的内容类型之外的所有类型 ]); p 根据内容ID编号查询，查询单个 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;p&#39; =&gt; 19, ]); name 根据内容别名slug查询，查询单个 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;name&#39; =&gt; &#39;test-01&#39;, ]); page_id 根据页面ID编号查询 1 2 3 $query = new WP_Query([ &#39;page_id&#39; =&gt; 12 ]); pagename 根据页面别名查询 1 2 3 $query = new WP_Query([ &#39;pagename&#39; =&gt; &#39;test-page-01&#39; ]); post_parent 根据父级id查询 1 2 3 4 5 6 7 8 9 10 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent&#39; =&gt; 10, //查询指定的父级id的内容,只获取直接关系的数据，不会递归获取 ]); // 获取所有顶级页面，post_parent = 0 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent&#39; =&gt; 0, ]); post_parent__in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent__in&#39; =&gt; [10, 11],//查询指定的父级id的内容,只获取直接关系的数据，不会递归获取 ]); post_parent__not_in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent__not_in&#39; =&gt; [10, 11],//排除指定的父级id的内容 ]); post__in 根据多个内容ID编号查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_in&#39; =&gt; [10,11], // 如果填写空数组，会查询指定类型的最新内容 ]); post__not_in 排除指定内容ID编号 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post__not_in&#39; =&gt; [10,11], // 如果填写空数组，会查询指定类型的最新内容 ]); post_name__in 根据内容别名查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_name__in&#39; =&gt; [&#39;test-01&#39;, &#39;test-02&#39;], ]); post_status 根据内容状态查询 publish 已发布 pending 待审核 draft 草稿 auto-draft 自动草稿 future 定时发布 private 私密 inherit 附件的特有的状态 trash 回收站 any 除了auto-draft和trash之外的所有状态 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; &#39;draft&#39; //获取草稿状态的内容 ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; &#39;publish&#39; //获取已发布的内容 ]); // 同时查询多个状态 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; [&#39;publish&#39;, &#39;future&#39;] //获取已发布的和定时发布的内容 ]); comment_count 根据评论数量查询 1 2 3 4 5 6 7 8 9 10 11 12 13 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;comment_count&#39; =&gt; 5 //查询评论数量为5的内容 ]); // 范围查询 &#39;=&#39;, &#39;!=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;, &#39;&lt;&#39;, &#39;&lt;=&#39; 默认值是&#39;=&#39; $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;comment_count&#39; =&gt; [ &#39;value&#39; =&gt; 1, &#39;compare&#39; =&gt; &#39;&gt;=&#39;, //查询评论数量大于等于1的内容 ] ]); date_query 根据日期查询 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;date_query&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 9, //查询9月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ], ]); // 范围查询 如：查询2024年9月1日 - 2024年10月1日的内容 // after 表示xx日期之后 before 表示xx日期之前 // 即：after 2024年9月1日 before 2024年10月1日 // 生成sql语句为 &gt; &#39;2024-09-01 00:00:00&#39; and &lt; &#39;2024-10-01 23:59:59&#39; $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;date_query&#39; =&gt; [ &#39;after&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 9, //查询9月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ], &#39;before&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 10, //查询10月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ] ], ]); WP_Query密码相关查询 has_password 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;has_password&#39; =&gt; true|false|null, //true获取设置了访问密码的内容；false获取没有设置访问密码的内容；null获取所有内容 ]); post_password 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_password&#39; =&gt; &#39;123456&#39;, //获取访问密码为123456的内容 ]); WP_Query自定义字段相关查询 meta_query 根据元数据（自定义字段）查询 1 2 3 4 5 6 7 8 9 10 11 12 // 曾经设置过指定自定义字段的内容。即：wp_post_meta里面有记录 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;meta_query&#39; =&gt; [ [ &#39;key&#39; =&gt; &#39;seo_keywords&#39;, //key指的是字段的名称 &#39;value&#39; =&gt; &#39;&#39;, //value指的是字段的值 &#39;compare&#39; =&gt; &#39;=&#39;, //compare指的是关系. &#39;=&#39;、&#39;!=&#39;等 &#39;type&#39; =&gt; &#39;CHAR&#39;, //type指的是字段数值的类型. &#39;NUMERIC&#39;, &#39;BINARY&#39;, &#39;CHAR&#39;, &#39;DATE&#39;, &#39;DATETIME&#39;, &#39;DECIMAL&#39;, &#39;SIGNED&#39;, &#39;TIME&#39;, &#39;UNSIGNED&#39; 默认值 &#39;CHAR&#39; ] ], ]); WP_Query的MIME类型相关查询 1 2 3 4 5 6 7 8 9 10 11 12 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inhirent&#39;, &#39;post_mime_type&#39; =&gt; &#39;image/jpeg&#39;, // 附件类型string/array ]); // 查询多种类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inhirent&#39;, &#39;post_mime_type&#39; =&gt; [&#39;image/jpeg&#39;, &#39;image/png&#39;], // 附件类型string/array ]); WP_Query排序参数相关查询 order 排序方式\n">
<meta property='og:url' content='https://hollisho.github.io/p/wordpress%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6/'>
<meta property='og:site_name' content='HoCode'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='wordpress' /><meta property='article:published_time' content='2024-03-24T16:18:45&#43;08:00'/><meta property='article:modified_time' content='2024-03-24T16:18:45&#43;08:00'/>
<meta name="twitter:title" content="Wordpress主题进阶">
<meta name="twitter:description" content="自定义内容模板层级 归档页 1 2 3 archive-$posttype.php archive.php index.php 详情页 1 2 3 4 5 $custom.php single-$posttype-$slug.php single-$posttype.php singular.php index.php 自定义分类项目归档页 1 2 3 4 5 taxonomy-$taxonomy-$term.php taxonomy-$taxonomy.php taxonomy.php archive.php index.php 自定义内容详情页默认查询 queried_object 当前内容信息 queried_object_id 当前内容id posts 数组里面只有一个内容信息 post 当前内容信息 is_single = 1 内容详情页 is_singular = 1 详情页 自定义分类项目归档页默认查询 queried_object 分类项目信息 queried_object_id 分类项目id posts 内容列表数组 post 当前内容信息 is_archive = 1 内容详情页 is_tax = 1 自定义的分类方式 自定义内容类型归档页 queried_object 自定义内容类型的信息(如：product) queried_object_id 空 （因为自定义的内容类型是保存在wp_post_type的全局变量中） posts 内容列表数组 post 当前内容信息 is_archive = 1 内容详情页 is_post_type_archive = 1 自定义内容类型归档页 文章添加自定义字段和自定义分类 调取分类方式数据 get_the_taxonomies 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /** * @param int|WP_Post $post Optional. Post ID or WP_Post object. Default is global $post. * @param array $args { * Optional. Arguments about how to format the list of taxonomies. Default empty array. * * @type string $template Template for displaying a taxonomy label and list of terms. * Default is &#34;Label: Terms.&#34; * @type string $term_template Template for displaying a single term in the list. Default is the term name * linked to its archive. * } * @return string[] List of taxonomies. */ function get_the_taxonomies( $post = 0, $args = array() ); //数据返回示例 Array( [category] =&gt; 分类目录：&lt;a href=&#34;http://xxx/category/uncategorized&#34;&gt;未分类&lt;/a&gt;。 [post_copy] =&gt; 文章版权：&lt;a href=&#34;http://xxx/post-copy/yuanchuang&#34;&gt;原创&lt;/a&gt;。 ); the_category（参考主题核心笔记） the_tags（参考主题核心笔记） the_terms 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 /** * @param int $post_id Post ID. * @param string $taxonomy Taxonomy name. * @param string $before Optional. String to use before the terms. Default empty. * @param string $sep Optional. String to use between the terms. Default &#39;, &#39;. * @param string $after Optional. String to use after the terms. Default empty. * @return void|false Void on success, false on failure. */ function the_terms( $post_id, $taxonomy, $before = &#39;&#39;, $sep = &#39;, &#39;, $after = &#39;&#39; ) { $term_list = get_the_term_list( $post_id, $taxonomy, $before, $sep, $after ); if ( is_wp_error( $term_list ) ) { return false; } /** * @param string $term_list List of terms to display. * @param string $taxonomy The taxonomy name. * @param string $before String to use before the terms. * @param string $sep String to use between the terms. * @param string $after String to use after the terms. */ echo apply_filters( &#39;the_terms&#39;, $term_list, $taxonomy, $before, $sep, $after ); } //使用举例 the_terms(get_the_ID(), &#39;post_copy&#39;); get_the_terms（纯数据，不带html标签） 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 /** * WP_Term Object * * term_id 分类ID * name 分类名称 * slug 分类别名 * description 分类描述 * taxonomy 分类项目的分类方式 post_tag * ...... */ function get_the_terms( $post, $taxonomy ); //使用举例 $terms = get_the_terms(get_the_ID(), &#39;post_copy&#39;); forearch($terms as $term) { echo &#39;分类项目ID：&#39; . $term-&gt;term_id; echo &#39;&lt;br /&gt;分类项目名称：&#39; . $term-&gt;name; echo &#39;&lt;br /&gt;分类项目别名：&#39; . $term-&gt;slug; echo &#39;&lt;br /&gt;分类项目描述：&#39; . $term-&gt;description; echo &#39;&lt;br /&gt;分类项目描述：&#39; . term_description($term-&gt;term_id); echo &#39;&lt;br /&gt;分类项目分类方式：&#39; . $term-&gt;taxonomy; echo &#39;&lt;br /&gt;分类项目下内容数量：&#39; . $term-&gt;count; echo &#39;&lt;br /&gt;分类项目网址：&#39; . get_term_link($term); } 获取分类方式扩展数据 get_term_meta 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /** * @param int $term_id Term ID. * @param string $key Optional. The meta key to retrieve. By default, * returns data for all keys. Default empty. * @param bool $single Optional. Whether to return a single value. * This parameter has no effect if `$key` is not specified. * Default false. * @return mixed An array of values if `$single` is false. * The value of the meta field if `$single` is true. * False for an invalid `$term_id` (non-numeric, zero, or negative value). * An empty string if a valid but non-existing term ID is passed. */ function get_term_meta( $term_id, $key = &#39;&#39;, $single = false ) { return get_metadata( &#39;term&#39;, $term_id, $key, $single ); } 使用示例 1 2 3 4 5 6 7 8 9 $terms = get_the_terms(get_the_ID(), &#39;post_copy&#39;); forearch($terms as $term) { echo &#39;分类项目ID：&#39; . $term-&gt;term_id; echo &#39;&lt;br /&gt;分类项目扩展字段seo_key：&#39; . get_term_meta($term-&gt;term_id, &#39;seo_key&#39;, true); // 获取图片id $pic_id = get_term_meta($term-&gt;term_id, &#39;seo_pic&#39;, true); echo &#39;&lt;br /&gt;分类项目扩展的图片：&#39; . wp_get_attachment_image($pic_id, &#39;thumbnail&#39;); } 获取文章扩展数据 get_post_meta（参考主题核心笔记） 1 2 3 4 5 6 7 8 9 // 在while(have_posts())循环中使用 get_post_meta(get_the_ID(), &#39;seo_key&#39;, true);//返回单个数据 get_post_meta(get_the_ID(), &#39;seo_key&#39;, false);//返回数组 // 获取文章扩展的配图字段 $post_img_ids = get_post_meta(get_the_ID(), &#39;post_img&#39;, false); foreach($post_img_ids as $img_id) { echo wp_get_attachment_image($img_id, &#39;thumbnail&#39;); } 自定义内容类型数据查询 1 2 3 4 5 6 7 $qb = get_queried_object(); // 内容类型的标记名 $qb-&gt;label; // 内容类型的名称 $qb-&gt;name; // 内容类型的描述 $qb-&gt;description; 自定义分类项目归档页数据查询 1 2 3 4 5 6 7 8 9 10 11 12 13 $term = get_queried_object(); // ID $term-&gt;term_id; // 别名 $term-&gt;slug; // 名称 $term-&gt;name; // 图像描述 $term-&gt;description; // 图像描述 term_description($term-&gt;term_id); // 获取扩展的数据 get_term_meta($term-&gt;term_id, &#39;key&#39;, true); 附件和分类方式相关数据的函数 附件相关 wp_get_attachment_image($img_id, $size = 'thumbnail') 1 2 // 返回结果示例 &lt;img src=&#34;http://xxx/xxx.jpg&#34; class=&#34;attachment-thumbnail&#34; alt=&#34;&#34; /&gt; wp_get_attachment_image_src($img_id, $size = 'thumbnail') 1 2 3 4 5 6 7 // 返回结果示例 Array( [0] =&gt; http://xxx/xxx.jpg,//图片url [1] =&gt; 150,//width [2] =&gt; 150,//heigth [3] =&gt; 1 ); wp_get_attachment_url($img_id, $size = 'thumbnail') 1 2 // 返回结果示例 http://xxx/xxx.jpg get_post_meta($img_id, '_wp_attachment_image_alt', true) 1 2 // 返回结果示例 图片的替代文本alt的信息 分类方式相关 获取某个分类方式本身的数据对象 get_taxonomy() 1 2 3 4 5 6 // 获取分类方式信息 get_taxonomy(&#39;category&#39;); // 获取标签信息 get_taxonomy(&#39;post_tag&#39;); // 获取产品分类 get_taxonomy(&#39;product_cat&#39;); 获取指定内容/内容类型关联的分类方式 get_object_taxonomies() 1 2 3 4 5 6 // 使用方式1,参数传内容类型的字符串 get_object_taxonomies(&#39;post&#39;); get_object_taxonomies(&#39;product&#39;); // 使用方式2，参数传内容的对象 get_object_taxonomies(get_post(1)); 判断某个分类方式是否存在 1 2 taxonomy_exists(&#39;product&#39;);//true taxonomy_exists(&#39;demo&#39;);//false 获取附件相关信息的函数 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // 根据附件ID获取附件网址 wp_get_attachment_url($attachment_id); // 根据附件ID获取附件Caption(说明) wp_get_attachment_caption($attachment_id); // 根据附件ID获取附件路径 get_attached_file($attachment_id); // 根据附件ID获取附件meta数据 wp_get_attachment_metadata($attachment_id); // 根据附件ID判断附件是否为图片 wp_attachment_is_image($attachment_id); // 根据附件ID获取图片html标签 wp_get_attachment_image($attachment_id); // 根据附件ID获取图片url/width/height wp_get_attachment_src($attachment_id); // 根据附件ID获取图片的URL地址 wp_get_attachment_url($attachment_id); // 根据附件ID获取图片的alt信息 get_post_meta($attachment_id, &#39;_wp_attachment_image_alt&#39;, true); 自主查询 WP_Query完整示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 //获取特定分类目录下的文章 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__in&#39; =&gt; [12], ]); // 循环输出文章信息 if ($query-&gt;have_posts()) while($query-&gt;have_posts()) { $query-&gt;the_post(); echo &#34;文章标题：&#34; . the_title(); } // 恢复现场 wp_reset_postdata(); WP_Query作者相关查询 author 根据用户ID查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author&#39; =&gt; 3, ]); author_name 根据用户nicename查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author_name&#39; =&gt; &#39;hollis&#39;, ]); author__in 根据多个用户ID查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author__in&#39; =&gt; [3,5], ]); author__not_in 排除某些用户ID 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;author__not_in&#39; =&gt; [1], ]); WP_Query分类目录相关查询 cat 子级的分类目录也会查询出来 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;cat&#39; =&gt; &#39;10,11&#39;,//-10,-11前面加负号表示排除 ]); category__in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__in&#39; =&gt; [12,13], ]); category_name 根据分类目录别名查询 1 2 3 4 5 6 7 8 9 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category_name &#39; =&gt; &#39;iphone,xiaomi&#39;, ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category_name &#39; =&gt; &#39;iphone+xiaomi&#39;, // 查询多个分类目录共有的数据 ]); category__and 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__and&#39; =&gt; &#39;12,13&#39;, // 查询多个分类目录共有的数据,类似category_name中的+号 ]); category__not_in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;category__not_in&#39; =&gt; [14], ]); WP_Query标签相关查询 tag 根据标签别名查询 1 2 3 4 5 6 7 8 9 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag&#39; =&gt; &#39;wordpress,php&#39;, ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag&#39; =&gt; &#39;wordpress+php&#39;,// 查询多个标签共有的数据 ]); tag_id 根据标签id查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag_id&#39; =&gt; &#39;70&#39;, //如果填写多个标签，自动获取第一个标签的数据 ]); tag__in 根据标签的ID编号，从单个或多个标签中获取数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__in&#39; =&gt; [79,81], ]); tag__and 根据标签的ID编号，获取多个标签中共有的数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__and&#39; =&gt; [79,81], ]); tag__not_in 排除指定标签的数据 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tag__not_in&#39; =&gt; [80], ]); tag_slug__and 根据标签的别名，获取多个标签中共有的数据 tag_slug__in 根据标签的别名，从单个或多个标签中获取数据 WP_Query分类方式相关查询 tax_query 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 // 根据分类方式别名查询 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;include_children&#39; =&gt; true, //是否包含子分类。默认值：true ] ] ]); // 根据分类方式ID编号查询 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;term_id&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [20], //告诉查询工具，上面指定的字段的值是什么 ] ] ]); // 根据分类方式别名查询，但不包含子分类 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;include_children&#39; =&gt; false, //是否包含子分类。默认值：true ] ] ]); // 从多个分类项目中获取数据 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ] ] ]); // 从多个分类方式的分类项目中获取数据 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ &#39;relation&#39; =&gt; &#39;AND&#39;, //多个分类方式的关系。可用值为AND,OR [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ], [ &#39;taxonomy&#39; =&gt; &#39;post_tag&#39;, //告诉查询工具，需要查询哪个分类方式 &#39;field&#39; =&gt; &#39;slug&#39;, //告诉查询工具，根据什么字段查询数据 &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], //告诉查询工具，上面指定的字段的值是什么 &#39;operator&#39; =&gt; &#39;AND&#39;, //操作类型。默认值是IN。AND表示是交集，NOT IN表示排除 ] ] ]); // 复杂查询，带嵌套。 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;tax_query&#39; =&gt; [ &#39;relation&#39; =&gt; &#39;AND&#39;, [ &#39;relation&#39; =&gt; &#39;AND&#39;, [ &#39;taxonomy&#39; =&gt; &#39;category&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;book&#39;, &#39;pancel&#39;], ], [ &#39;taxonomy&#39; =&gt; &#39;post_tag&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], ] ], [ &#39;taxonomy&#39; =&gt; &#39;post_copy&#39;, &#39;field&#39; =&gt; &#39;slug&#39;, &#39;terms&#39; =&gt; [&#39;test&#39;, &#39;default&#39;], ] ] ]); WP_Query搜索相关查询 s 会通过正文、摘要、标题等内容搜索内容 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;s&#39; =&gt; &#39;世界&#39;, ]); WP_Query内容相关查询 post_type 查询的内容类型 post page revision attachment nav_menu_item any 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 //查询单个内容类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, ]); //查询多个内容类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; [&#39;post&#39;, &#39;page&#39;, &#39;product&#39;], ]); // 查询附件内容 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inherit&#39;, // 查询附件内容，需要指定内容状态的字段，才能查询出内容 ]); // any $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;any&#39;, //除了设置exclude from search = true的内容类型之外的所有类型 ]); p 根据内容ID编号查询，查询单个 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;p&#39; =&gt; 19, ]); name 根据内容别名slug查询，查询单个 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;name&#39; =&gt; &#39;test-01&#39;, ]); page_id 根据页面ID编号查询 1 2 3 $query = new WP_Query([ &#39;page_id&#39; =&gt; 12 ]); pagename 根据页面别名查询 1 2 3 $query = new WP_Query([ &#39;pagename&#39; =&gt; &#39;test-page-01&#39; ]); post_parent 根据父级id查询 1 2 3 4 5 6 7 8 9 10 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent&#39; =&gt; 10, //查询指定的父级id的内容,只获取直接关系的数据，不会递归获取 ]); // 获取所有顶级页面，post_parent = 0 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent&#39; =&gt; 0, ]); post_parent__in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent__in&#39; =&gt; [10, 11],//查询指定的父级id的内容,只获取直接关系的数据，不会递归获取 ]); post_parent__not_in 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;page&#39;, //自定义内容类型如果设置了层级关系，也可以查询 &#39;post_parent__not_in&#39; =&gt; [10, 11],//排除指定的父级id的内容 ]); post__in 根据多个内容ID编号查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_in&#39; =&gt; [10,11], // 如果填写空数组，会查询指定类型的最新内容 ]); post__not_in 排除指定内容ID编号 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post__not_in&#39; =&gt; [10,11], // 如果填写空数组，会查询指定类型的最新内容 ]); post_name__in 根据内容别名查询 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_name__in&#39; =&gt; [&#39;test-01&#39;, &#39;test-02&#39;], ]); post_status 根据内容状态查询 publish 已发布 pending 待审核 draft 草稿 auto-draft 自动草稿 future 定时发布 private 私密 inherit 附件的特有的状态 trash 回收站 any 除了auto-draft和trash之外的所有状态 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; &#39;draft&#39; //获取草稿状态的内容 ]); $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; &#39;publish&#39; //获取已发布的内容 ]); // 同时查询多个状态 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;post_status&#39; =&gt; [&#39;publish&#39;, &#39;future&#39;] //获取已发布的和定时发布的内容 ]); comment_count 根据评论数量查询 1 2 3 4 5 6 7 8 9 10 11 12 13 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;comment_count&#39; =&gt; 5 //查询评论数量为5的内容 ]); // 范围查询 &#39;=&#39;, &#39;!=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;, &#39;&lt;&#39;, &#39;&lt;=&#39; 默认值是&#39;=&#39; $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;comment_count&#39; =&gt; [ &#39;value&#39; =&gt; 1, &#39;compare&#39; =&gt; &#39;&gt;=&#39;, //查询评论数量大于等于1的内容 ] ]); date_query 根据日期查询 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;date_query&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 9, //查询9月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ], ]); // 范围查询 如：查询2024年9月1日 - 2024年10月1日的内容 // after 表示xx日期之后 before 表示xx日期之前 // 即：after 2024年9月1日 before 2024年10月1日 // 生成sql语句为 &gt; &#39;2024-09-01 00:00:00&#39; and &lt; &#39;2024-10-01 23:59:59&#39; $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;date_query&#39; =&gt; [ &#39;after&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 9, //查询9月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ], &#39;before&#39; =&gt; [ [ &#39;year&#39; =&gt; 2024, //查询2024年发布的内容 &#39;month&#39; =&gt; 10, //查询10月份的内容 &#39;day&#39; =&gt; 1, //查询1号的内容 ] ] ], ]); WP_Query密码相关查询 has_password 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;has_password&#39; =&gt; true|false|null, //true获取设置了访问密码的内容；false获取没有设置访问密码的内容；null获取所有内容 ]); post_password 1 2 3 4 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, //post、page、product &#39;post_password&#39; =&gt; &#39;123456&#39;, //获取访问密码为123456的内容 ]); WP_Query自定义字段相关查询 meta_query 根据元数据（自定义字段）查询 1 2 3 4 5 6 7 8 9 10 11 12 // 曾经设置过指定自定义字段的内容。即：wp_post_meta里面有记录 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;post&#39;, &#39;meta_query&#39; =&gt; [ [ &#39;key&#39; =&gt; &#39;seo_keywords&#39;, //key指的是字段的名称 &#39;value&#39; =&gt; &#39;&#39;, //value指的是字段的值 &#39;compare&#39; =&gt; &#39;=&#39;, //compare指的是关系. &#39;=&#39;、&#39;!=&#39;等 &#39;type&#39; =&gt; &#39;CHAR&#39;, //type指的是字段数值的类型. &#39;NUMERIC&#39;, &#39;BINARY&#39;, &#39;CHAR&#39;, &#39;DATE&#39;, &#39;DATETIME&#39;, &#39;DECIMAL&#39;, &#39;SIGNED&#39;, &#39;TIME&#39;, &#39;UNSIGNED&#39; 默认值 &#39;CHAR&#39; ] ], ]); WP_Query的MIME类型相关查询 1 2 3 4 5 6 7 8 9 10 11 12 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inhirent&#39;, &#39;post_mime_type&#39; =&gt; &#39;image/jpeg&#39;, // 附件类型string/array ]); // 查询多种类型 $query = new WP_Query([ &#39;post_type&#39; =&gt; &#39;attachment&#39;, &#39;post_status&#39; =&gt; &#39;inhirent&#39;, &#39;post_mime_type&#39; =&gt; [&#39;image/jpeg&#39;, &#39;image/png&#39;], // 附件类型string/array ]); WP_Query排序参数相关查询 order 排序方式\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_1badc3931a35b1a0.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🧐</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">HoCode</a></h1>
            <h2 class="site-description">闲静少言，不慕荣利。好读书，不求甚解；每有会意，便欣然忘食。</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/hollisho'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://gitee.com/hollisho'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Gitee</title><path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.15a.592.592 0 0 1-.592-.592v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>首页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>技术链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#自定义内容模板层级">自定义内容模板层级</a>
      <ol>
        <li><a href="#归档页">归档页</a></li>
        <li><a href="#详情页">详情页</a></li>
      </ol>
    </li>
    <li><a href="#自定义分类项目归档页">自定义分类项目归档页</a></li>
    <li><a href="#自定义内容详情页默认查询">自定义内容详情页默认查询</a></li>
    <li><a href="#自定义分类项目归档页默认查询">自定义分类项目归档页默认查询</a></li>
    <li><a href="#自定义内容类型归档页">自定义内容类型归档页</a></li>
    <li><a href="#文章添加自定义字段和自定义分类">文章添加自定义字段和自定义分类</a>
      <ol>
        <li><a href="#调取分类方式数据">调取分类方式数据</a></li>
        <li><a href="#获取分类方式扩展数据">获取分类方式扩展数据</a></li>
        <li><a href="#获取文章扩展数据">获取文章扩展数据</a></li>
      </ol>
    </li>
    <li><a href="#自定义内容类型数据查询">自定义内容类型数据查询</a></li>
    <li><a href="#自定义分类项目归档页数据查询">自定义分类项目归档页数据查询</a></li>
    <li><a href="#附件和分类方式相关数据的函数">附件和分类方式相关数据的函数</a>
      <ol>
        <li><a href="#附件相关">附件相关</a></li>
        <li><a href="#分类方式相关">分类方式相关</a></li>
      </ol>
    </li>
    <li><a href="#获取附件相关信息的函数">获取附件相关信息的函数</a></li>
    <li><a href="#自主查询">自主查询</a>
      <ol>
        <li><a href="#wp_query完整示例">WP_Query完整示例</a></li>
        <li><a href="#wp_query作者相关查询">WP_Query作者相关查询</a></li>
        <li><a href="#wp_query分类目录相关查询">WP_Query分类目录相关查询</a></li>
        <li><a href="#wp_query标签相关查询">WP_Query标签相关查询</a></li>
        <li><a href="#wp_query分类方式相关查询">WP_Query分类方式相关查询</a></li>
        <li><a href="#wp_query搜索相关查询">WP_Query搜索相关查询</a></li>
        <li><a href="#wp_query内容相关查询">WP_Query内容相关查询</a></li>
        <li><a href="#wp_query密码相关查询">WP_Query密码相关查询</a></li>
        <li><a href="#wp_query自定义字段相关查询">WP_Query自定义字段相关查询</a></li>
        <li><a href="#wp_query的mime类型相关查询">WP_Query的MIME类型相关查询</a></li>
        <li><a href="#wp_query排序参数相关查询">WP_Query排序参数相关查询</a></li>
        <li><a href="#wp_query分页参数相关查询">WP_Query分页参数相关查询</a></li>
      </ol>
    </li>
    <li><a href="#主题自定义功能">主题自定义功能</a>
      <ol>
        <li><a href="#顶部图像功能">顶部图像功能</a></li>
        <li><a href="#自定义背景图像">自定义背景图像</a></li>
        <li><a href="#自定义菜单和小工具">自定义菜单和小工具</a></li>
        <li><a href="#customize-api">Customize API</a>
          <ol>
            <li><a href="#panel-可设置的参数">panel 可设置的参数</a></li>
            <li><a href="#section-可设置的参数">section 可设置的参数</a></li>
            <li><a href="#setting-可以设置的参数">setting 可以设置的参数</a></li>
            <li><a href="#使用举例">使用举例</a></li>
            <li><a href="#获取数据">获取数据</a></li>
            <li><a href="#关键设置">关键设置</a></li>
            <li><a href="#control的类型">control的类型</a></li>
            <li><a href="#操作panel">操作panel</a></li>
            <li><a href="#操作section">操作section</a></li>
            <li><a href="#操作control">操作control</a></li>
            <li><a href="#操作setting">操作setting</a></li>
          </ol>
        </li>
        <li><a href="#获取用户自定义的数据">获取用户自定义的数据</a></li>
      </ol>
    </li>
    <li><a href="#角色和权限">角色和权限</a>
      <ol>
        <li><a href="#用户角色">用户角色</a></li>
        <li><a href="#获取权限">获取权限</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/wordpress/" style="background-color: #2a9d8f; color: #fff;">
                Wordpress
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/wordpress%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6/">Wordpress主题进阶</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2024-03-24 16:18</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="自定义内容模板层级">自定义内容模板层级
</h2><h3 id="归档页">归档页
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">archive</span><span class="o">-</span><span class="nv">$posttype</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">archive</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">index</span><span class="o">.</span><span class="nx">php</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="详情页">详情页
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$custom</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">single</span><span class="o">-</span><span class="nv">$posttype</span><span class="o">-</span><span class="nv">$slug</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">single</span><span class="o">-</span><span class="nv">$posttype</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">singular</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">index</span><span class="o">.</span><span class="nx">php</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="自定义分类项目归档页">自定义分类项目归档页
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">taxonomy</span><span class="o">-</span><span class="nv">$taxonomy</span><span class="o">-</span><span class="nv">$term</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">taxonomy</span><span class="o">-</span><span class="nv">$taxonomy</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">taxonomy</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">archive</span><span class="o">.</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nx">index</span><span class="o">.</span><span class="nx">php</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="自定义内容详情页默认查询">自定义内容详情页默认查询
</h2><ul>
<li>queried_object 当前内容信息</li>
<li>queried_object_id 当前内容id</li>
<li>posts 数组里面只有一个内容信息</li>
<li>post 当前内容信息</li>
<li>is_single = 1 内容详情页</li>
<li>is_singular = 1 详情页</li>
</ul>
<h2 id="自定义分类项目归档页默认查询">自定义分类项目归档页默认查询
</h2><ul>
<li>queried_object 分类项目信息</li>
<li>queried_object_id 分类项目id</li>
<li>posts 内容列表数组</li>
<li>post 当前内容信息</li>
<li>is_archive = 1 内容详情页</li>
<li>is_tax = 1 自定义的分类方式</li>
</ul>
<h2 id="自定义内容类型归档页">自定义内容类型归档页
</h2><ul>
<li>queried_object 自定义内容类型的信息(如：product)</li>
<li>queried_object_id 空 （因为自定义的内容类型是保存在wp_post_type的全局变量中）</li>
<li>posts 内容列表数组</li>
<li>post 当前内容信息</li>
<li>is_archive = 1 内容详情页</li>
<li>is_post_type_archive = 1 自定义内容类型归档页</li>
</ul>
<h2 id="文章添加自定义字段和自定义分类">文章添加自定义字段和自定义分类
</h2><h3 id="调取分类方式数据">调取分类方式数据
</h3><ul>
<li><code>get_the_taxonomies</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param int|WP_Post $post Optional. Post ID or WP_Post object. Default is global $post.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param array       $args {
</span></span></span><span class="line"><span class="cl"><span class="sd"> *           Optional. Arguments about how to format the list of taxonomies. Default empty array.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> *     @type string $template      Template for displaying a taxonomy label and list of terms.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *                                 Default is &#34;Label: Terms.&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd"> *     @type string $term_template Template for displaying a single term in the list. Default is the term name
</span></span></span><span class="line"><span class="cl"><span class="sd"> *                                 linked to its archive.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * }
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @return string[] List of taxonomies.
</span></span></span><span class="line"><span class="cl"><span class="sd"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">get_the_taxonomies</span><span class="p">(</span> <span class="nv">$post</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//数据返回示例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">Array</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="p">[</span><span class="nx">category</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">分类目录：</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;http://xxx/category/uncategorized&#34;</span><span class="o">&gt;</span><span class="nx">未分类</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span><span class="nx">。</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="nx">post_copy</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">文章版权：</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;http://xxx/post-copy/yuanchuang&#34;</span><span class="o">&gt;</span><span class="nx">原创</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span><span class="nx">。</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>the_category</code>（参考主题核心笔记）</li>
<li><code>the_tags</code>（参考主题核心笔记）</li>
<li><code>the_terms</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param int    $post_id  Post ID.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $taxonomy Taxonomy name.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $before   Optional. String to use before the terms. Default empty.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $sep      Optional. String to use between the terms. Default &#39;, &#39;.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $after    Optional. String to use after the terms. Default empty.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @return void|false Void on success, false on failure.
</span></span></span><span class="line"><span class="cl"><span class="sd"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">the_terms</span><span class="p">(</span> <span class="nv">$post_id</span><span class="p">,</span> <span class="nv">$taxonomy</span><span class="p">,</span> <span class="nv">$before</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$sep</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$after</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nv">$term_list</span> <span class="o">=</span> <span class="nx">get_the_term_list</span><span class="p">(</span> <span class="nv">$post_id</span><span class="p">,</span> <span class="nv">$taxonomy</span><span class="p">,</span> <span class="nv">$before</span><span class="p">,</span> <span class="nv">$sep</span><span class="p">,</span> <span class="nv">$after</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span> <span class="nx">is_wp_error</span><span class="p">(</span> <span class="nv">$term_list</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">	 * @param string $term_list List of terms to display.
</span></span></span><span class="line"><span class="cl"><span class="sd">	 * @param string $taxonomy  The taxonomy name.
</span></span></span><span class="line"><span class="cl"><span class="sd">	 * @param string $before    String to use before the terms.
</span></span></span><span class="line"><span class="cl"><span class="sd">	 * @param string $sep       String to use between the terms.
</span></span></span><span class="line"><span class="cl"><span class="sd">	 * @param string $after     String to use after the terms.
</span></span></span><span class="line"><span class="cl"><span class="sd">	 */</span>
</span></span><span class="line"><span class="cl">	<span class="k">echo</span> <span class="nx">apply_filters</span><span class="p">(</span> <span class="s1">&#39;the_terms&#39;</span><span class="p">,</span> <span class="nv">$term_list</span><span class="p">,</span> <span class="nv">$taxonomy</span><span class="p">,</span> <span class="nv">$before</span><span class="p">,</span> <span class="nv">$sep</span><span class="p">,</span> <span class="nv">$after</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//使用举例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">the_terms</span><span class="p">(</span><span class="nx">get_the_ID</span><span class="p">(),</span> <span class="s1">&#39;post_copy&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>get_the_terms</code>（纯数据，不带html标签）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">* WP_Term Object
</span></span></span><span class="line"><span class="cl"><span class="sd">*
</span></span></span><span class="line"><span class="cl"><span class="sd">* term_id 分类ID
</span></span></span><span class="line"><span class="cl"><span class="sd">* name 分类名称
</span></span></span><span class="line"><span class="cl"><span class="sd">* slug 分类别名
</span></span></span><span class="line"><span class="cl"><span class="sd">* description 分类描述
</span></span></span><span class="line"><span class="cl"><span class="sd">* taxonomy 分类项目的分类方式 post_tag
</span></span></span><span class="line"><span class="cl"><span class="sd">* ......
</span></span></span><span class="line"><span class="cl"><span class="sd">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">get_the_terms</span><span class="p">(</span> <span class="nv">$post</span><span class="p">,</span> <span class="nv">$taxonomy</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//使用举例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$terms</span> <span class="o">=</span> <span class="nx">get_the_terms</span><span class="p">(</span><span class="nx">get_the_ID</span><span class="p">(),</span> <span class="s1">&#39;post_copy&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">forearch</span><span class="p">(</span><span class="nv">$terms</span> <span class="k">as</span> <span class="nv">$term</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;分类项目ID：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目名称：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目别名：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">slug</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目描述：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目描述：&#39;</span> <span class="o">.</span> <span class="nx">term_description</span><span class="p">(</span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目分类方式：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">taxonomy</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目下内容数量：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">count</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目网址：&#39;</span> <span class="o">.</span> <span class="nx">get_term_link</span><span class="p">(</span><span class="nv">$term</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="获取分类方式扩展数据">获取分类方式扩展数据
</h3><ul>
<li><code>get_term_meta</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param int    $term_id Term ID.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $key     Optional. The meta key to retrieve. By default,
</span></span></span><span class="line"><span class="cl"><span class="sd"> *                        returns data for all keys. Default empty.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param bool   $single  Optional. Whether to return a single value.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *                        This parameter has no effect if `$key` is not specified.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *                        Default false.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @return mixed An array of values if `$single` is false.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               The value of the meta field if `$single` is true.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               False for an invalid `$term_id` (non-numeric, zero, or negative value).
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               An empty string if a valid but non-existing term ID is passed.
</span></span></span><span class="line"><span class="cl"><span class="sd"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">get_term_meta</span><span class="p">(</span> <span class="nv">$term_id</span><span class="p">,</span> <span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$single</span> <span class="o">=</span> <span class="k">false</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">get_metadata</span><span class="p">(</span> <span class="s1">&#39;term&#39;</span><span class="p">,</span> <span class="nv">$term_id</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$single</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>使用示例</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$terms</span> <span class="o">=</span> <span class="nx">get_the_terms</span><span class="p">(</span><span class="nx">get_the_ID</span><span class="p">(),</span> <span class="s1">&#39;post_copy&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">forearch</span><span class="p">(</span><span class="nv">$terms</span> <span class="k">as</span> <span class="nv">$term</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;分类项目ID：&#39;</span> <span class="o">.</span> <span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目扩展字段seo_key：&#39;</span> <span class="o">.</span> <span class="nx">get_term_meta</span><span class="p">(</span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">,</span> <span class="s1">&#39;seo_key&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 获取图片id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$pic_id</span> <span class="o">=</span> <span class="nx">get_term_meta</span><span class="p">(</span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">,</span> <span class="s1">&#39;seo_pic&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;分类项目扩展的图片：&#39;</span> <span class="o">.</span> <span class="nx">wp_get_attachment_image</span><span class="p">(</span><span class="nv">$pic_id</span><span class="p">,</span> <span class="s1">&#39;thumbnail&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="获取文章扩展数据">获取文章扩展数据
</h3><ul>
<li><code>get_post_meta</code>（参考主题核心笔记）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 在while(have_posts())循环中使用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_post_meta</span><span class="p">(</span><span class="nx">get_the_ID</span><span class="p">(),</span> <span class="s1">&#39;seo_key&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span><span class="c1">//返回单个数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_post_meta</span><span class="p">(</span><span class="nx">get_the_ID</span><span class="p">(),</span> <span class="s1">&#39;seo_key&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span><span class="c1">//返回数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// 获取文章扩展的配图字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$post_img_ids</span> <span class="o">=</span> <span class="nx">get_post_meta</span><span class="p">(</span><span class="nx">get_the_ID</span><span class="p">(),</span> <span class="s1">&#39;post_img&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">foreach</span><span class="p">(</span><span class="nv">$post_img_ids</span> <span class="k">as</span> <span class="nv">$img_id</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="nx">wp_get_attachment_image</span><span class="p">(</span><span class="nv">$img_id</span><span class="p">,</span> <span class="s1">&#39;thumbnail&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="自定义内容类型数据查询">自定义内容类型数据查询
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$qb</span> <span class="o">=</span> <span class="nx">get_queried_object</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 内容类型的标记名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$qb</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 内容类型的名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$qb</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 内容类型的描述
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$qb</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="自定义分类项目归档页数据查询">自定义分类项目归档页数据查询
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$term</span> <span class="o">=</span> <span class="nx">get_queried_object</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 别名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">slug</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 图像描述
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">description</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 图像描述
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">term_description</span><span class="p">(</span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 获取扩展的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_term_meta</span><span class="p">(</span><span class="nv">$term</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="附件和分类方式相关数据的函数">附件和分类方式相关数据的函数
</h2><h3 id="附件相关">附件相关
</h3><ul>
<li><code>wp_get_attachment_image($img_id, $size = 'thumbnail')</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 返回结果示例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&#34;http://xxx/xxx.jpg&#34;</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&#34;attachment-thumbnail&#34;</span> <span class="nx">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span> <span class="o">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>wp_get_attachment_image_src($img_id, $size = 'thumbnail')</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 返回结果示例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">Array</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">http</span><span class="o">://</span><span class="nx">xxx</span><span class="o">/</span><span class="nx">xxx</span><span class="o">.</span><span class="nx">jpg</span><span class="p">,</span><span class="c1">//图片url
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="p">,</span><span class="c1">//width
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">150</span><span class="p">,</span><span class="c1">//heigth
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>wp_get_attachment_url($img_id, $size = 'thumbnail')</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 返回结果示例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">http</span><span class="o">://</span><span class="nx">xxx</span><span class="o">/</span><span class="nx">xxx</span><span class="o">.</span><span class="nx">jpg</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>get_post_meta($img_id, '_wp_attachment_image_alt', true)</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 返回结果示例
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">图片的替代文本alt的信息</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分类方式相关">分类方式相关
</h3><ul>
<li>获取某个分类方式本身的数据对象 <code>get_taxonomy()</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 获取分类方式信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_taxonomy</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 获取标签信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_taxonomy</span><span class="p">(</span><span class="s1">&#39;post_tag&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 获取产品分类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_taxonomy</span><span class="p">(</span><span class="s1">&#39;product_cat&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>获取指定内容/内容类型关联的分类方式 <code>get_object_taxonomies()</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 使用方式1,参数传内容类型的字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_object_taxonomies</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">get_object_taxonomies</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 使用方式2，参数传内容的对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_object_taxonomies</span><span class="p">(</span><span class="nx">get_post</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>判断某个分类方式是否存在</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">taxonomy_exists</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">);</span><span class="c1">//true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">taxonomy_exists</span><span class="p">(</span><span class="s1">&#39;demo&#39;</span><span class="p">);</span><span class="c1">//false
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="获取附件相关信息的函数">获取附件相关信息的函数
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取附件网址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_get_attachment_url</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取附件Caption(说明)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_get_attachment_caption</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取附件路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_attached_file</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取附件meta数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_get_attachment_metadata</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID判断附件是否为图片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_attachment_is_image</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取图片html标签
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_get_attachment_image</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取图片url/width/height
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_get_attachment_src</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取图片的URL地址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_get_attachment_url</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 根据附件ID获取图片的alt信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_post_meta</span><span class="p">(</span><span class="nv">$attachment_id</span><span class="p">,</span> <span class="s1">&#39;_wp_attachment_image_alt&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="自主查询">自主查询
</h2><h3 id="wp_query完整示例">WP_Query完整示例
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">//获取特定分类目录下的文章
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;category__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">12</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 循环输出文章信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">have_posts</span><span class="p">())</span> <span class="k">while</span><span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">have_posts</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">the_post</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;文章标题：&#34;</span> <span class="o">.</span> <span class="nx">the_title</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 恢复现场
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_reset_postdata</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query作者相关查询">WP_Query作者相关查询
</h3><ul>
<li><code>author</code> 根据用户ID查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;author&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>author_name</code> 根据用户nicename查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;author_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;hollis&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>author__in</code> 根据多个用户ID查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;author__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>author__not_in</code> 排除某些用户ID</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;author__not_in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query分类目录相关查询">WP_Query分类目录相关查询
</h3><ul>
<li><code>cat</code> 子级的分类目录也会查询出来</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;cat&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;10,11&#39;</span><span class="p">,</span><span class="c1">//-10,-11前面加负号表示排除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>category__in</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;category__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>category_name</code> 根据分类目录别名查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;category_name &#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;iphone,xiaomi&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;category_name &#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;iphone+xiaomi&#39;</span><span class="p">,</span> <span class="c1">// 查询多个分类目录共有的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>category__and</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;category__and&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;12,13&#39;</span><span class="p">,</span> <span class="c1">// 查询多个分类目录共有的数据,类似category_name中的+号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>category__not_in</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;category__not_in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">14</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query标签相关查询">WP_Query标签相关查询
</h3><ul>
<li><code>tag</code> 根据标签别名查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tag&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;wordpress,php&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tag&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;wordpress+php&#39;</span><span class="p">,</span><span class="c1">// 查询多个标签共有的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>tag_id</code> 根据标签id查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tag_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;70&#39;</span><span class="p">,</span> <span class="c1">//如果填写多个标签，自动获取第一个标签的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>tag__in</code> 根据标签的ID编号，从单个或多个标签中获取数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tag__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">79</span><span class="p">,</span><span class="mi">81</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>tag__and</code> 根据标签的ID编号，获取多个标签中共有的数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tag__and&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">79</span><span class="p">,</span><span class="mi">81</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>tag__not_in</code> 排除指定标签的数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tag__not_in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">80</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>tag_slug__and</code> 根据标签的别名，获取多个标签中共有的数据</li>
<li><code>tag_slug__in</code> 根据标签的别名，从单个或多个标签中获取数据</li>
</ul>
<h3 id="wp_query分类方式相关查询">WP_Query分类方式相关查询
</h3><ul>
<li><code>tax_query</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 根据分类方式别名查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tax_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="c1">//告诉查询工具，需要查询哪个分类方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>   <span class="c1">//告诉查询工具，根据什么字段查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">],</span>  <span class="c1">//告诉查询工具，上面指定的字段的值是什么
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;include_children&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="c1">//是否包含子分类。默认值：true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 根据分类方式ID编号查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tax_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="c1">//告诉查询工具，需要查询哪个分类方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;term_id&#39;</span><span class="p">,</span>   <span class="c1">//告诉查询工具，根据什么字段查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">20</span><span class="p">],</span>  <span class="c1">//告诉查询工具，上面指定的字段的值是什么
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 根据分类方式别名查询，但不包含子分类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tax_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="c1">//告诉查询工具，需要查询哪个分类方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>   <span class="c1">//告诉查询工具，根据什么字段查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">],</span>  <span class="c1">//告诉查询工具，上面指定的字段的值是什么
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;include_children&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="c1">//是否包含子分类。默认值：true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 从多个分类项目中获取数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tax_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="c1">//告诉查询工具，需要查询哪个分类方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>   <span class="c1">//告诉查询工具，根据什么字段查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">,</span> <span class="s1">&#39;pancel&#39;</span><span class="p">],</span>  <span class="c1">//告诉查询工具，上面指定的字段的值是什么
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;operator&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="c1">//操作类型。默认值是IN。AND表示是交集，NOT IN表示排除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 从多个分类方式的分类项目中获取数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tax_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;relation&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="c1">//多个分类方式的关系。可用值为AND,OR
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="c1">//告诉查询工具，需要查询哪个分类方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>   <span class="c1">//告诉查询工具，根据什么字段查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">,</span> <span class="s1">&#39;pancel&#39;</span><span class="p">],</span>  <span class="c1">//告诉查询工具，上面指定的字段的值是什么
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;operator&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="c1">//操作类型。默认值是IN。AND表示是交集，NOT IN表示排除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post_tag&#39;</span><span class="p">,</span> <span class="c1">//告诉查询工具，需要查询哪个分类方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>   <span class="c1">//告诉查询工具，根据什么字段查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">],</span>  <span class="c1">//告诉查询工具，上面指定的字段的值是什么
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;operator&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="c1">//操作类型。默认值是IN。AND表示是交集，NOT IN表示排除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 复杂查询，带嵌套。
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;tax_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;relation&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;relation&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AND&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">,</span> <span class="s1">&#39;pancel&#39;</span><span class="p">],</span> 
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post_tag&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;taxonomy&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post_copy&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;terms&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query搜索相关查询">WP_Query搜索相关查询
</h3><ul>
<li><code>s</code> 会通过正文、摘要、标题等内容搜索内容</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;s&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;世界&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query内容相关查询">WP_Query内容相关查询
</h3><ul>
<li><code>post_type</code>  查询的内容类型
<ul>
<li>post</li>
<li>page</li>
<li>revision</li>
<li>attachment</li>
<li>nav_menu_item</li>
<li>any</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">//查询单个内容类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//查询多个内容类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 查询附件内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;attachment&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_status&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;inherit&#39;</span><span class="p">,</span> <span class="c1">// 查询附件内容，需要指定内容状态的字段，才能查询出内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// any
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;any&#39;</span><span class="p">,</span> <span class="c1">//除了设置exclude from search = true的内容类型之外的所有类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>p</code> 根据内容ID编号查询，查询单个</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;p&#39;</span> <span class="o">=&gt;</span> <span class="mi">19</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>name</code> 根据内容别名slug查询，查询单个</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;test-01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>page_id</code> 根据页面ID编号查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;page_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">12</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>pagename</code> 根据页面别名查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;pagename&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;test-page-01&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post_parent</code> 根据父级id查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="c1">//自定义内容类型如果设置了层级关系，也可以查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_parent&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="c1">//查询指定的父级id的内容,只获取直接关系的数据，不会递归获取
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取所有顶级页面，post_parent = 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="c1">//自定义内容类型如果设置了层级关系，也可以查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_parent&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post_parent__in</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="c1">//自定义内容类型如果设置了层级关系，也可以查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_parent__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span><span class="c1">//查询指定的父级id的内容,只获取直接关系的数据，不会递归获取
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post_parent__not_in</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="c1">//自定义内容类型如果设置了层级关系，也可以查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_parent__not_in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span><span class="c1">//排除指定的父级id的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post__in</code> 根据多个内容ID编号查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">],</span> <span class="c1">// 如果填写空数组，会查询指定类型的最新内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post__not_in</code> 排除指定内容ID编号</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post__not_in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">],</span> <span class="c1">// 如果填写空数组，会查询指定类型的最新内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post_name__in</code> 根据内容别名查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_name__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;test-01&#39;</span><span class="p">,</span> <span class="s1">&#39;test-02&#39;</span><span class="p">],</span> 
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post_status</code> 根据内容状态查询
<ul>
<li>publish 已发布</li>
<li>pending 待审核</li>
<li>draft 草稿</li>
<li>auto-draft 自动草稿</li>
<li>future 定时发布</li>
<li>private 私密</li>
<li>inherit 附件的特有的状态</li>
<li>trash 回收站</li>
<li>any 除了auto-draft和trash之外的所有状态</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_status&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;draft&#39;</span> <span class="c1">//获取草稿状态的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_status&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;publish&#39;</span> <span class="c1">//获取已发布的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 同时查询多个状态
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_status&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="s1">&#39;future&#39;</span><span class="p">]</span> <span class="c1">//获取已发布的和定时发布的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>comment_count</code> 根据评论数量查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;comment_count&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span> <span class="c1">//查询评论数量为5的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 范围查询 &#39;=&#39;, &#39;!=&#39;, &#39;&gt;&#39;, &#39;&gt;=&#39;, &#39;&lt;&#39;, &#39;&lt;=&#39; 默认值是&#39;=&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;comment_count&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;compare&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span> <span class="c1">//查询评论数量大于等于1的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>date_query</code> 根据日期查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;date_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">       <span class="p">[</span>
</span></span><span class="line"><span class="cl">           <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="mi">2024</span><span class="p">,</span>  <span class="c1">//查询2024年发布的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="mi">9</span><span class="p">,</span>    <span class="c1">//查询9月份的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="s1">&#39;day&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>      <span class="c1">//查询1号的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="p">]</span> 
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 范围查询 如：查询2024年9月1日 - 2024年10月1日的内容
</span></span></span><span class="line"><span class="cl"><span class="c1">// after 表示xx日期之后  before 表示xx日期之前
</span></span></span><span class="line"><span class="cl"><span class="c1">// 即：after 2024年9月1日  before  2024年10月1日
</span></span></span><span class="line"><span class="cl"><span class="c1">// 生成sql语句为 &gt; &#39;2024-09-01 00:00:00&#39; and &lt; &#39;2024-10-01 23:59:59&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;date_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">       <span class="s1">&#39;after&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">           <span class="p">[</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="mi">2024</span><span class="p">,</span>  <span class="c1">//查询2024年发布的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>               <span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="mi">9</span><span class="p">,</span>    <span class="c1">//查询9月份的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>               <span class="s1">&#39;day&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>      <span class="c1">//查询1号的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="p">]</span> 
</span></span><span class="line"><span class="cl">       <span class="p">],</span>
</span></span><span class="line"><span class="cl">       <span class="s1">&#39;before&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">           <span class="p">[</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="mi">2024</span><span class="p">,</span>  <span class="c1">//查询2024年发布的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>               <span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>    <span class="c1">//查询10月份的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>               <span class="s1">&#39;day&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>      <span class="c1">//查询1号的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>           <span class="p">]</span> 
</span></span><span class="line"><span class="cl">       <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query密码相关查询">WP_Query密码相关查询
</h3><ul>
<li><code>has_password</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;has_password&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="o">|</span><span class="k">false</span><span class="o">|</span><span class="k">null</span><span class="p">,</span> <span class="c1">//true获取设置了访问密码的内容；false获取没有设置访问密码的内容；null获取所有内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>post_password</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="c1">//post、page、product
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;post_password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;123456&#39;</span><span class="p">,</span> <span class="c1">//获取访问密码为123456的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query自定义字段相关查询">WP_Query自定义字段相关查询
</h3><ul>
<li><code>meta_query</code> 根据元数据（自定义字段）查询</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 曾经设置过指定自定义字段的内容。即：wp_post_meta里面有记录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;meta_query&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;seo_keywords&#39;</span><span class="p">,</span> <span class="c1">//key指的是字段的名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>           <span class="c1">//value指的是字段的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;compare&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span>        <span class="c1">//compare指的是关系. &#39;=&#39;、&#39;!=&#39;等
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CHAR&#39;</span><span class="p">,</span>            <span class="c1">//type指的是字段数值的类型. &#39;NUMERIC&#39;, &#39;BINARY&#39;, &#39;CHAR&#39;, &#39;DATE&#39;, &#39;DATETIME&#39;, &#39;DECIMAL&#39;, &#39;SIGNED&#39;, &#39;TIME&#39;, &#39;UNSIGNED&#39; 默认值 &#39;CHAR&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query的mime类型相关查询">WP_Query的MIME类型相关查询
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;attachment&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_status&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;inhirent&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_mime_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span> <span class="c1">// 附件类型string/array
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 查询多种类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;attachment&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_status&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;inhirent&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_mime_type&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span> <span class="s1">&#39;image/png&#39;</span><span class="p">],</span> <span class="c1">// 附件类型string/array
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query排序参数相关查询">WP_Query排序参数相关查询
</h3><ul>
<li>
<p><code>order</code> 排序方式</p>
<ul>
<li>ASC 升序</li>
<li>DESC 降序</li>
</ul>
</li>
<li>
<p><code>orderby</code> 排序的字段</p>
<ul>
<li>none 不排序</li>
<li>ID</li>
<li>author 根据作者ID编号排序</li>
<li>title</li>
<li>name 根据别名排序</li>
<li>type 根据内容类型排序</li>
<li>date 根据发布日期排序</li>
<li>modified 根据修改时间排序</li>
<li>parent 根据父级ID编号排序</li>
<li>rand 随机排序</li>
<li>comment_count 根据评论数量排序</li>
<li>relevance 根据相关性排序，一般配合s参数使用</li>
<li>menu_order 根据后台的页面属性中的“排序”进行排列</li>
<li>meta_value 根据自定义字段来排序，需要配合“meta_key”字段指定排序字段</li>
<li>meta_value_num 根据自定义字段(数值类型的字段)来排序</li>
<li>post__in 根据in中参数填写的顺序排序</li>
<li>post_name__in 根据in中参数填写的顺序排序</li>
<li>post_parent__in 根据in中参数填写的顺序排序</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ASC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;date&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 设置不排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ASC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;none&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 根据ID排序,倒序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ID&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 随机排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rand&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 根据自定义字段排序,实际是根据post_meta表的数据排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;meta_value&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;meta_key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;seo_keywords&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 根据自定义字段的数值排序，meta_key指定的字段需要设置为数字类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;meta_value_num&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;meta_key&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;seo_keywords&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// post__in 排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;orderby&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post__in&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post__in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span><span class="c1">//根据填写的顺序排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="wp_query分页参数相关查询">WP_Query分页参数相关查询
</h3><ul>
<li><code>nopaging</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 不分页，获取所有数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;nopaging&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>posts_per_page</code> 每页大小</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 每页最多包含两条记录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;posts_per_page&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>paged</code> 页码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 查询第二页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;paged&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>posts_per_archive_page</code> （wp内部参数）</li>
<li><code>offset</code>（wp内部参数）</li>
<li><code>page</code>（wp内部参数）</li>
<li><code>ignore_sticky_posts</code> 忽略置顶内容</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;post_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;ignore_sticky_posts&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="主题自定义功能">主题自定义功能
</h2><blockquote>
<p>新版文档：developer.wordpress.org</p>
<p>老版文档：codex.wordpress.org</p></blockquote>
<h3 id="顶部图像功能">顶部图像功能
</h3><ul>
<li>开启顶部图像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">start_custom_header</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 开启顶部图像功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">add_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-header&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;after_setup_theme&#39;</span><span class="p">,</span> <span class="s1">&#39;start_custom_header&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 顶部图像在数据库保存的位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">wp_options表option_name为theme_mods_</span><span class="p">{</span><span class="nx">当前主题文件夹名称</span><span class="p">}</span><span class="nx">的记录中。option_value保存是一个序列化的对象数据。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>显示顶部图像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;img src=&#34;&lt;?php echo header_image(); ?&gt;&#34; /&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>默认参数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$defaults</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 设置默认图像，也就是没有上传时所使用的图像
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;default-image&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 采取随机方式显示默认图像（设置多个默认图像，然后随机使用）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;random-default&#39;</span>       <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 上传图片时候，会显示一个裁剪框，用户可以拖动裁剪框，选择要显示的图片部分。上传图片后，会对上传的图片进行尺寸裁剪，设置裁剪后图片的宽度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;width&#39;</span>                <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 上传图片时候，会显示一个裁剪框，用户可以拖动裁剪框，选择要显示的图片部分。上传图片后，会对上传的图片进行尺寸裁剪，设置裁剪后图片的高度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;height&#39;</span>               <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 是否采用可变高度，即：裁剪框的高度可以拖动改变
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;flex-heigth&#39;</span>          <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 是否采用可变宽度，即：裁剪框的宽度可以拖动改变
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 特别注意：可变宽度，最终生成的图片宽度都是1500px
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;flex-width&#39;</span>           <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 是否允许用户在后台裁剪上传的图片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;uploads&#39;</span>              <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 是否使用顶部文本，使用的话则允许用户设置顶部文本的颜色
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;header-text&#39;</span>          <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 设置顶部文本的默认颜色
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;default-text-color&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 设置会被添加到主题中的wp_head钩子中的函数，在wp_head()函数执行时会调用此处的函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;wp-head-callback&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">start_custom_header</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 开启顶部图像功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">add_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-header&#39;</span><span class="p">,</span> <span class="nv">$defaults</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;after_setup_theme&#39;</span><span class="p">,</span> <span class="s1">&#39;start_custom_header&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>default-image</code>参数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// functions.php中设置
</span></span><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl">function start_custom_header()
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	$params = [
</span></span><span class="line"><span class="cl">        &#39;default-image&#39; =&gt; get_template_directory_uri() . &#39;/images/default.jpg&#39;
</span></span><span class="line"><span class="cl">    ];
</span></span><span class="line"><span class="cl">    // 开启顶部图像功能
</span></span><span class="line"><span class="cl">    add_theme_support(&#39;custom-header&#39;, $params);
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">add_action(&#39;after_setup_theme&#39;, &#39;start_custom_header&#39;);
</span></span><span class="line"><span class="cl">?&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// 前台调用,如果用户没有设置顶部图像，则显示默认图像
</span></span><span class="line"><span class="cl">&lt;?php echo header_image(); ?&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>random-default</code>参数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// functions.php中设置
</span></span><span class="line"><span class="cl">&lt;?php
</span></span><span class="line"><span class="cl">function start_custom_header()
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	$params = [
</span></span><span class="line"><span class="cl">        &#39;random-default&#39; =&gt; true,
</span></span><span class="line"><span class="cl">    ];
</span></span><span class="line"><span class="cl">    // 开启顶部图像功能
</span></span><span class="line"><span class="cl">    add_theme_support(&#39;custom-header&#39;, $params);
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    // 设置多张顶部图像，用来随机获取
</span></span><span class="line"><span class="cl">    register_default_headers([
</span></span><span class="line"><span class="cl">        &#39;pic-01&#39; =&gt; [
</span></span><span class="line"><span class="cl">            &#39;url&#39; =&gt; get_template_directory_uri() . &#39;/images/pic-01.jpg&#39;,
</span></span><span class="line"><span class="cl">            &#39;thumbnail_url&#39; =&gt; get_template_directory_uri() . &#39;/images/pic-01-thumbnail.jpg&#39;,
</span></span><span class="line"><span class="cl">            &#39;description&#39; =&gt; &#39;图片01&#39;,
</span></span><span class="line"><span class="cl">        ],
</span></span><span class="line"><span class="cl">        &#39;pic-02&#39; =&gt; [
</span></span><span class="line"><span class="cl">            &#39;url&#39; =&gt; get_template_directory_uri() . &#39;/images/pic-02.jpg&#39;,
</span></span><span class="line"><span class="cl">            &#39;thumbnail_url&#39; =&gt; get_template_directory_uri() . &#39;/images/pic-02-thumbnail.jpg&#39;,
</span></span><span class="line"><span class="cl">            &#39;description&#39; =&gt; &#39;图片02&#39;,
</span></span><span class="line"><span class="cl">        ],
</span></span><span class="line"><span class="cl">    ]);
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">add_action(&#39;after_setup_theme&#39;, &#39;start_custom_header&#39;);
</span></span><span class="line"><span class="cl">?&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// 前台调用,随机显示默认图像
</span></span><span class="line"><span class="cl">&lt;?php echo header_image(); ?&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>header-text</code></li>
<li><code>default-text-color</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// functions.php中设置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">start_custom_header</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nv">$params</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;header_text&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="c1">//false表示关闭顶部文本，用户无法设置顶部字体颜色
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s1">&#39;default-text-color&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;2c0747&#39;</span><span class="p">,</span> <span class="c1">// 设置默认颜色，不能包含#号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 开启顶部图像功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">add_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-header&#39;</span><span class="p">,</span> <span class="nv">$params</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;after_setup_theme&#39;</span><span class="p">,</span> <span class="s1">&#39;start_custom_header&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>wp-head-callback</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// functions.php中设置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">start_custom_header</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nv">$params</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;wp-head-callback&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">echo</span> <span class="s1">&#39;&lt;style type=&#34;text/css&#34;&gt;.my-class {color:#}&#39;</span> <span class="o">.</span> <span class="nx">get_header_textcolor</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;}&lt;/style&gt;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 开启顶部图像功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">add_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-header&#39;</span><span class="p">,</span> <span class="nv">$params</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;after_setup_theme&#39;</span><span class="p">,</span> <span class="s1">&#39;start_custom_header&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="cp">?&gt;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">// 前台调用my-class样式
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;div class=&#34;my-class&#34;&gt;文本&lt;/div&gt;
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>顶部图像相关函数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 获取用户设置的顶部图像url网址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">header_image</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">get_header_images</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* 获取顶部图像的所有相关信息
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 返回stdClass Object
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 字段url,thumbnail_url,width,height,attachment_id
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 使用举例：&lt;img src=&#34;&lt;?=get_custom_header()-&gt;url ?&gt;&#34; width=&#34;&lt;?=get_custom_header()-&gt;width ?&gt;&#34; height=&#34;&lt;?=get_custom_header()-&gt;height ?&gt;&#34; /&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="nx">get_custom_header</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取设置的顶部文本设置的颜色值，不包含#号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">header_textcolor</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">get_header_textcolor</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 将多个图片设置成随机顶部图像
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">register_default_headers</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="自定义背景图像">自定义背景图像
</h3><ul>
<li>开启背景图像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">start_custom_background</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 开启背景图像功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 后台设置背景图像和颜色-背景颜色的功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">add_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-background&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;after_setup_theme&#39;</span><span class="p">,</span> <span class="s1">&#39;start_custom_background&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 前端页面需要设置body_class()后，才会有效果
</span></span></span><span class="line"><span class="cl"><span class="c1">// &lt;body class=&#34;&lt;?php body_class() ?&gt;&#34;&gt; &lt;/body&gt;
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>默认参数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1"># 默认的背景图片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;default-image&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 图片是否平铺。repeat-x、repeat-y、repeat、no-repeat
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;default-repeat&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;repeat&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 图片水平方向的位置。left、center、right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;default-position-x&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 图片是否跟随内容滚动，scroll滚动 | fixed固定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;default-attachment&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;scroll&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 默认的背景颜色
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;default-color&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 挂载到wp_head钩子下的函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="s1">&#39;wp-head-callback&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;_custom_background_cb&#39;</span><span class="p">,</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>自定义背景图像相关函数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 获取主题定义设置项的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_mod</span><span class="p">(</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="k">false</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取自定义背景图像url
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">background_image</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">get_background_image</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取自定义背景颜色的值（不包含#号）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">background_color</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">get_background_color</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取自定义背景图像的平铺方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_mod</span><span class="p">(</span><span class="s1">&#39;background_repeat&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取自定义背景图像水平方向的对齐方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_mod</span><span class="p">(</span><span class="s1">&#39;background_position_x&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 获取自定义背景图像是否跟随内容滚动
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_mod</span><span class="p">(</span><span class="s1">&#39;background_attachment&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//从 global $_wp_theme_features 中获取指定的设置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-background&#39;</span><span class="p">,</span> <span class="s1">&#39;xxxx&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 结合get_theme_mod 和 get_theme_support。如果用户没有设置，则获取默认值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_mod</span><span class="p">(</span><span class="s1">&#39;background_attachment&#39;</span><span class="p">,</span> <span class="nx">get_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-background&#39;</span><span class="p">,</span> <span class="s1">&#39;background_attachment&#39;</span><span class="p">););</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="自定义菜单和小工具">自定义菜单和小工具
</h3><ul>
<li>开启小工具</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;widgets_init&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 注册小工具，主题自定义功能中就可以看到小工具
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">register_sidebar</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 前端调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">dynamic_sidebar</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>菜单相关函数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd"> * Registers a navigation menu location for a theme.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $location    Menu location identifier, like a slug.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $description Menu location descriptive text.
</span></span></span><span class="line"><span class="cl"><span class="sd"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">register_nav_menu</span><span class="p">(</span> <span class="nv">$location</span><span class="p">,</span> <span class="nv">$description</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">register_nav_menus</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="nv">$location</span> <span class="o">=&gt;</span> <span class="nv">$description</span> <span class="p">)</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>注册导航菜单</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;after_setup_theme&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">register_nav_menu</span><span class="p">(</span><span class="s1">&#39;primary&#39;</span><span class="p">,</span> <span class="s1">&#39;主要菜单&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="customize-api">Customize API
</h3><blockquote>
<p>panel、section、control 、setting</p></blockquote>
<h4 id="panel-可设置的参数">panel 可设置的参数
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$panel_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># panel的优先级，用于排序，值越小越往前排
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;priority&#39;</span>          <span class="o">=&gt;</span> <span class="mi">160</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 操作panel需要具备的权限。如果无权限，界面上看不到该panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;capability&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;edit_theme_options&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># title的描述，会在界面中展示给用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;title&#39;</span>             <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># panel的描述，会在界面中展示给用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># panel激活时会调用的函数，填写函数的名称，如果函数的返回值为false，则不显示此panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;active_callback&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】panel包含了哪些section，填写section的id，一般无需填写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;sections&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】主题必须首先支持什么功能，才让panel生效。
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 比如&#39;custom-header&#39;，主题必须开启顶部图像功能才能生效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;theme_supports&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】panel的类型，使用默认值即可
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;type&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="section-可设置的参数">section 可设置的参数
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$section_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># section的优先级，用于同一个panel下的section间的排序，值越小越靠前
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;priority&#39;</span>             <span class="o">=&gt;</span> <span class="mi">160</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;panel&#39;</span>                <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 操作此section，需要的权限
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;capability&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;edit_theme_options&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># section的标题，会在界面中展示给用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;title&#39;</span>                <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># section的说明，会在界面中展示给用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;description&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># section激活前会调用的函数，如果函数的返回值为false的话，则不显示此section
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;active_callback&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】此section下包含哪些control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;controls&#39;</span>             <span class="o">=&gt;</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】section的类型，无需理解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;type&#39;</span>                 <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】主题必须首先支持什么功能，才让section生效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;theme_supports&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="setting-可以设置的参数">setting 可以设置的参数
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$setting_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># setting的保存类型，可以取的值为&#39;option&#39; 或  &#39;theme_mod&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># &#39;option&#39; - 将数据当作独立条目保存到wp_option表中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># &#39;theme_mod&#39; - 将数据保存到wp_option表中的名称为theme_mods_{当前主题名称}&#39;项目中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;type&#39;</span>                 <span class="o">=&gt;</span> <span class="s1">&#39;theme_mod&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 保存setting数据需要的权限
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;capability&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;edit_theme_options&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># setting（设置项）的默认值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;default&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 可取的值，要么是refresh，要么是postMessage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># refresh - 刷新查看预览效果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># postMessage - 无需刷新即可查看预览效果，需要自定义js来实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;transport&#39;</span>            <span class="o">=&gt;</span> <span class="s1">&#39;refresh&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 设置数据处理函数，填写函数的名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 在保存数据前，首先将数据先传递给此处的函数进行处理，然后才是保存
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 需要接受原始数据，并返回处理后的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;sanitize_callback&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 设置数据处理函数，填写函数的名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 在获取数据后，首先将数据传递给此处的函数进行处理，然后才是使用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 需要接受原始数据，并返回处理后的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 使用举例：可以用来保存颜色数值，在显示的时候自动加上&#39;#&#39;号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;sanitize_js_callback&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】主题必须首先支持什么功能，才让setting生效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;theme_supports&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="使用举例">使用举例
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">customize_new_items</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_panel</span><span class="p">(</span><span class="s1">&#39;general_panel&#39;</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;hollis test panel&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;this is holiis test panel&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建section
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_section</span><span class="p">(</span><span class="s1">&#39;section_first&#39;</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;panel&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;general_panel&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section first&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section first description&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建setting
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_setting</span><span class="p">(</span><span class="s1">&#39;my_site_keywords&#39;</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;theme_mod&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="s1">&#39;control_first&#39;</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_first&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_site_keywords&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;control label&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="s1">&#39;customize_new_items&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="获取数据">获取数据
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1"># setting 中设置type为theme_mod
</span></span></span><span class="line"><span class="cl"><span class="c1"># 应用场景：限定设置项目在当前主题中使用。如：主题个性化的设置，logo，背景等
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_theme_mod</span><span class="p">(</span><span class="s1">&#39;setting_id&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># setting 中设置type为opiton
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">get_option</span><span class="p">(</span><span class="s1">&#39;setting_id&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="关键设置">关键设置
</h4><ul>
<li><code>active_callback</code> 用于控制方式显示。true显示，false不显示</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_panel</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;active_callback&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;is_front_page&#39;</span><span class="p">,</span> <span class="c1">//调用wp内置的is_front_page函数，判断是否显示该panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>theme_supports</code> 开启指定主题功能时才显示</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_panel</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;theme_supports&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;custome-header&#39;</span><span class="p">,</span> <span class="c1">//当开启自定义顶部图像的时候才显示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//需要开启指定主题功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_theme_support</span><span class="p">(</span><span class="s1">&#39;custom-header&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="control的类型">control的类型
</h4><ul>
<li>普通表单类型的control（WP_Customize_Control）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$control_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control属于哪个section，填写section的id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;section&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 填写和此control对应的setting的ID，作用是将contorl（界面）和setting（数据）建立关系
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;settings&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control的类型，可取的值有
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># text - 文本域类型的表单，如&lt;input type=&#34;text&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># checkbox - 复选框类型的表单，如&lt;input type=&#34;checkbox&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># textarea - 多行文本域类型的表单，如&lt;textarea&gt;&lt;/textarea&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># radio - 单选框类型的表单，如&lt;input type=&#34;radio&#34;&gt;男
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># select - 定义下拉列表，如&lt;select&gt;&lt;option&gt;&lt;/option&gt;&lt;/select&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># dropdown-pages - 可以在站点的所有页面选择一个页面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># email - 文本域类型的表单， 如&lt;input type=&#34;text&#34; &gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># url - 文本域类型的表单， 如&lt;input type=&#34;text&#34; &gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># number - 文本域类型的表单， 如&lt;input type=&#34;text&#34; &gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># hidden - 隐藏域类型的表单， 如&lt;input type=&#34;hidden&#34; &gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># date - 日期选择，可以选择日期
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;type&#39;</span>              <span class="o">=&gt;</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 优先级，用于同一个section下的control间的排序，值越小越靠前
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;priority&#39;</span>          <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;label&#39;</span>             <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control激活前会调用的函数，如果函数的返回值为false的话，则不显示此control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;active_callback&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 当control的类型(type)是radio(单选框)或select(下拉选择框)时有效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 该参数的格式：如下
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># array(&#39;value&#39; =&gt; &#39;label&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 其中value是真正保存的值，而label是给用户看的提示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 当type不是checkbox|radio|select|textarea|dropdown-pages时有效
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># 作用是给input元素增加属性，例如
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># array(&#39;size&#39; =&gt; &#39;40&#39;, &#39;class&#39; =&gt; &#39;my-class&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;input_attrs&#39;</span> <span class="o">=&gt;</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 【用默认值即可】无需设置，不用去理解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;setting&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>普通表单control综合应用</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">customize_control_args</span><span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建panel略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建section略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建setting略 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 为隐藏域设置值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_setting</span><span class="p">(</span><span class="s1">&#39;setting_id_05&#39;</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;theme_mod&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="mi">123456</span>
</span></span><span class="line"><span class="cl">    <span class="p">]);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//单选框
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Color_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;单行文本&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;type取值为text&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;input_attrs&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-class&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span><span class="c1">//通过input_attrs参数增加属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//复选框
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Color_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_02&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_02&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;复选框&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;type取值为checkbox&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;checkbox&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//多行文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Color_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_03&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_03&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;多行文本&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;type取值为textarea&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//单选框
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Color_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_04&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_04&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;单选框&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;type取值为radio&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;radio&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;男&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;女&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">//隐藏域,value只能通过setting设置,看上面setting_id_05定义
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Color_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_05&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_05&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;隐藏域&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;type取值为hidden&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;男&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;女&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="s1">&#39;customize_control_color_args&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>颜色选择类型的<code>control</code>（WP_Customize_Color_Control）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$color_control_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control属于哪个section，填写section的id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;section&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 填写和此control对应的setting的ID，作用是将contorl（界面）和setting（数据）建立关系
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;settings&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 优先级，用于同一个section下的control间的排序，值越小越靠前
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;priority&#39;</span>          <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;label&#39;</span>             <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control激活前会调用的函数，如果函数的返回值为false的话，则不显示此control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;active_callback&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">customize_control_color_args</span><span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建panel略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建section略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建setting略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Color_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;颜色设置&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;请设置颜色&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="s1">&#39;customize_control_color_args&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>图片上传类型的<code>control</code>（WP_Customize_Image_Control）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$image_control_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control属于哪个section，填写section的id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;section&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 填写和此control对应的setting的ID，作用是将contorl（界面）和setting（数据）建立关系
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;settings&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 优先级，用于同一个section下的control间的排序，值越小越靠前
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;priority&#39;</span>          <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;label&#39;</span>             <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control激活前会调用的函数，如果函数的返回值为false的话，则不显示此control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;active_callback&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">customize_control_image_args</span><span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建panel略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建section略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建setting略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Image_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;图片上传&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;上传图片&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="s1">&#39;customize_control_image_args&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>附件上传类型的<code>control</code>（WP_Customize_Upload_Control）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$upload_control_args</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control属于哪个section，填写section的id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;section&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 填写和此control对应的setting的ID，作用是将contorl（界面）和setting（数据）建立关系
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;settings&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 优先级，用于同一个section下的control间的排序，值越小越靠前
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;priority&#39;</span>          <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;label&#39;</span>             <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;description&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># control激活前会调用的函数，如果函数的返回值为false的话，则不显示此control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1"># mime_type描述的是，设置可以从媒体库中选择的文件类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;mime_type&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;active_callback&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">customize_control_upload_args</span><span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建panel略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建section略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//创建setting略  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    <span class="c1">//创建control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">add_control</span><span class="p">(</span><span class="k">new</span> <span class="nx">WP_Customize_Upload_Control</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$wp_customize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;control_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;section_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;settings&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;setting_id_01&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;附件上传&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;上传附件&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;mime_type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;application/msword&#39;</span><span class="p">,</span> <span class="c1">//限定只能在媒体库中选择doc文件，但是无法限制上传文件的类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="s1">&#39;customize_control_upload_args&#39;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="操作panel">操作panel
</h4><blockquote>
<p>场景主要是针对wp自带的功能panel</p>
<p>菜单-&gt;panel ID为&rsquo;nav_menus'</p>
<p>小工具-&gt;panel ID为&rsquo;widgets'</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 修改panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_panel</span> <span class="o">=</span> <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">get_panel</span><span class="p">(</span><span class="s1">&#39;custom_form&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_panel</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="s1">&#39;哈哈&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_panel</span><span class="o">-&gt;</span><span class="na">description</span> <span class="o">=</span> <span class="s1">&#39;修改了panel的description&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 删除panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">remove_panel</span><span class="p">(</span><span class="s1">&#39;custom_form&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//操作默认的panel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$menu_panel</span> <span class="o">=</span> <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">get_panel</span><span class="p">(</span><span class="s1">&#39;nav_menus&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$menu_panel</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="s1">&#39;站点菜单&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$meun_panel</span><span class="o">-&gt;</span><span class="na">priority</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$widget_panel</span> <span class="o">=</span> <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">get_panel</span><span class="p">(</span><span class="s1">&#39;widgets&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$widget_panel</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="s1">&#39;站点边栏&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$widget_panel</span><span class="o">-&gt;</span><span class="na">priority</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="操作section">操作section
</h4><blockquote>
<p>wp自带的section</p>
<p>激活主题-&gt;section的ID为&rsquo;themes'</p>
<p>站点身份-&gt;section的ID为&rsquo;title_tagline'</p>
<p>颜色-&gt;section的ID为&rsquo;colors'</p>
<p>顶部图像-&gt;section的ID为&rsquo;header_image'</p>
<p>背景图像-&gt;section的ID为&rsquo;background_image'</p>
<p>静态首页-&gt;section的ID为&rsquo;static_front_page'</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 修改section
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_section</span> <span class="o">=</span> <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">get_section</span><span class="p">(</span><span class="s1">&#39;section_id_01&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_section</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="s1">&#39;最新标题&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_section</span><span class="o">-&gt;</span><span class="na">panel</span> <span class="o">=</span> <span class="s1">&#39;修改了section的panel&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 删除section
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">remove_section</span><span class="p">(</span><span class="s1">&#39;section_id_01&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="操作control">操作control
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 修改control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_control</span> <span class="o">=</span> <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">get_control</span><span class="p">(</span><span class="s1">&#39;my_control&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_section</span><span class="o">-&gt;</span><span class="na">label</span> <span class="o">=</span> <span class="s1">&#39;最新标题&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_section</span><span class="o">-&gt;</span><span class="na">type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 删除control
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">remove_control</span><span class="p">(</span><span class="s1">&#39;my_control&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="操作setting">操作setting
</h4><blockquote>
<p>如果setting被移除，对应的control可以显示，但是control的数据不再被保存</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// 修改setting
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_setting</span> <span class="o">=</span> <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">get_setting</span><span class="p">(</span><span class="s1">&#39;my_setting&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$my_setting</span><span class="o">-&gt;</span><span class="na">type</span> <span class="o">=</span> <span class="s1">&#39;theme_mod&#39;</span><span class="p">;</span><span class="c1">//更改setting的存储方式为theme_mod
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nv">$my_setting</span><span class="o">-&gt;</span><span class="na">default</span> <span class="o">=</span> <span class="s1">&#39;default value&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$Y</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 删除setting
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">add_action</span><span class="p">(</span><span class="s1">&#39;customize_register&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$wp_customize</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$wp_customize</span><span class="o">-&gt;</span><span class="na">remove_setting</span><span class="p">(</span><span class="s1">&#39;my_setting&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="获取用户自定义的数据">获取用户自定义的数据
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd"> * Retrieves an option value based on an option name.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * If the option does not exist, and a default value is not provided,
</span></span></span><span class="line"><span class="cl"><span class="sd"> * boolean false is returned. This could be used to check whether you need
</span></span></span><span class="line"><span class="cl"><span class="sd"> * to initialize an option during installation of a plugin, however that
</span></span></span><span class="line"><span class="cl"><span class="sd"> * can be done better by using add_option() which will not overwrite
</span></span></span><span class="line"><span class="cl"><span class="sd"> * existing options.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * Not initializing an option and using boolean `false` as a return value
</span></span></span><span class="line"><span class="cl"><span class="sd"> * is a bad practice as it triggers an additional database query.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * The type of the returned value can be different from the type that was passed
</span></span></span><span class="line"><span class="cl"><span class="sd"> * when saving or updating the option. If the option value was serialized,
</span></span></span><span class="line"><span class="cl"><span class="sd"> * then it will be unserialized when it is returned. In this case the type will
</span></span></span><span class="line"><span class="cl"><span class="sd"> * be the same. For example, storing a non-scalar value like an array will
</span></span></span><span class="line"><span class="cl"><span class="sd"> * return the same array.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * In most cases non-string scalar and null values will be converted and returned
</span></span></span><span class="line"><span class="cl"><span class="sd"> * as string equivalents.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * Exceptions:
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * 1. When the option has not been saved in the database, the `$default_value` value
</span></span></span><span class="line"><span class="cl"><span class="sd"> *    is returned if provided. If not, boolean `false` is returned.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * 2. When one of the Options API filters is used: {@see &#39;pre_option_$option&#39;},
</span></span></span><span class="line"><span class="cl"><span class="sd"> *    {@see &#39;default_option_$option&#39;}, or {@see &#39;option_$option&#39;}, the returned
</span></span></span><span class="line"><span class="cl"><span class="sd"> *    value may not match the expected type.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * 3. When the option has just been saved in the database, and get_option()
</span></span></span><span class="line"><span class="cl"><span class="sd"> *    is used right after, non-string scalar and null values are not converted to
</span></span></span><span class="line"><span class="cl"><span class="sd"> *    string equivalents and the original type is returned.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * Examples:
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * When adding options like this: `add_option( &#39;my_option_name&#39;, &#39;value&#39; )`
</span></span></span><span class="line"><span class="cl"><span class="sd"> * and then retrieving them with `get_option( &#39;my_option_name&#39; )`, the returned
</span></span></span><span class="line"><span class="cl"><span class="sd"> * values will be:
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `false` returns `string(0) &#34;&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `true`  returns `string(1) &#34;1&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `0`     returns `string(1) &#34;0&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `1`     returns `string(1) &#34;1&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `&#39;0&#39;`   returns `string(1) &#34;0&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `&#39;1&#39;`   returns `string(1) &#34;1&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *   - `null`  returns `string(0) &#34;&#34;`
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * When adding options with non-scalar values like
</span></span></span><span class="line"><span class="cl"><span class="sd"> * `add_option( &#39;my_array&#39;, array( false, &#39;str&#39;, null ) )`, the returned value
</span></span></span><span class="line"><span class="cl"><span class="sd"> * will be identical to the original as it is serialized before saving
</span></span></span><span class="line"><span class="cl"><span class="sd"> * it in the database:
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> *     array(3) {
</span></span></span><span class="line"><span class="cl"><span class="sd"> *         [0] =&gt; bool(false)
</span></span></span><span class="line"><span class="cl"><span class="sd"> *         [1] =&gt; string(3) &#34;str&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd"> *         [2] =&gt; NULL
</span></span></span><span class="line"><span class="cl"><span class="sd"> *     }
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @since 1.5.0
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @global wpdb $wpdb WordPress database abstraction object.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $option        Name of the option to retrieve. Expected to not be SQL-escaped.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param mixed  $default_value Optional. Default value to return if the option does not exist.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @return mixed Value of the option. A value of any type may be returned, including
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               scalar (string, boolean, float, integer), null, array, object.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               Scalar and null values will be returned as strings as long as they originate
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               from a database stored option value. If there is no option in the database,
</span></span></span><span class="line"><span class="cl"><span class="sd"> *               boolean `false` is returned.
</span></span></span><span class="line"><span class="cl"><span class="sd"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">get_option</span><span class="p">(</span> <span class="nv">$option</span><span class="p">,</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="k">false</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd"> * Retrieves theme modification value for the active theme.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * If the modification name does not exist and `$default_value` is a string, then the
</span></span></span><span class="line"><span class="cl"><span class="sd"> * default will be passed through the {@link https://www.php.net/sprintf sprintf()}
</span></span></span><span class="line"><span class="cl"><span class="sd"> * PHP function with the template directory URI as the first value and the
</span></span></span><span class="line"><span class="cl"><span class="sd"> * stylesheet directory URI as the second value.
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @since 2.1.0
</span></span></span><span class="line"><span class="cl"><span class="sd"> *
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param string $name          Theme modification name.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @param mixed  $default_value Optional. Theme modification default value. Default false.
</span></span></span><span class="line"><span class="cl"><span class="sd"> * @return mixed Theme modification value.
</span></span></span><span class="line"><span class="cl"><span class="sd"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">get_theme_mod</span><span class="p">(</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="k">false</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="角色和权限">角色和权限
</h2><blockquote>
<p><a class="link" href="https://wordpress.org/documentation/article/roles-and-capabilities/"  target="_blank" rel="noopener"
    >https://wordpress.org/documentation/article/roles-and-capabilities/</a></p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">操作&lt;-&gt;权限  一对一
</span></span><span class="line"><span class="cl">角色&lt;-&gt;权限  多对多
</span></span><span class="line"><span class="cl">用户&lt;-&gt;角色  多对多
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="用户角色">用户角色
</h3><blockquote>
<p>wordpress内置了6个角色</p></blockquote>
<ul>
<li>超级管理员(wp开启多站点功能，才会有该角色)</li>
<li>管理员</li>
<li>编辑</li>
<li>作者</li>
<li>投稿者</li>
<li>订阅者</li>
</ul>
<p>后台可以设置用户注册后的默认角色</p>
<h3 id="获取权限">获取权限
</h3><p>用户登录-&gt;获取用户角色-&gt;获取角色权限</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/wordpress/">Wordpress</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/woocommerce%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91/">
        
        

        <div class="article-details">
            <h2 class="article-title">Woocommerce主题开发</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/wordpress%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%9F%A5%E8%AF%86/">
        
        

        <div class="article-details">
            <h2 class="article-title">Wordpress插件开发知识</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/wordpress%E4%B8%BB%E9%A2%98%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E6%A2%B3%E7%90%86/">
        
        

        <div class="article-details">
            <h2 class="article-title">Wordpress主题核心知识点梳理</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="hollisho/hollisho-blog-talks"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 Hollis Ho
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
